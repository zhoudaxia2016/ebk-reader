{"version":3,"file":"static/js/213.64602d9e.chunk.js","mappings":"qJAAA,MAiBMA,EAAcC,GAAK,GAAK,EAAIA,IAAM,EAAIA,GAyBtCC,EAAY,SAACC,EAAKC,EAAMC,GAAwB,IAAjBC,EAAGC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGF,EACvC,MAAMK,EAAQP,EAAIQ,cAGlB,OAFAD,EAAME,SAASR,EAAMC,GACrBK,EAAMG,OAAOT,EAAME,GACZI,CACX,EAGMI,EAAa,SAACX,EAAKC,EAAMW,GAAgD,IAA5CV,EAAKE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAAGD,EAAGC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGH,EAAKY,UAAUR,OAC/D,GAAIF,EAAMD,IAAU,EAAG,CAEnB,OADeU,EAAGb,EAAUC,EAAKC,EAAMC,GAAQH,EAAUC,EAAKC,EAAME,IACpD,EAAID,EAAQC,CAChC,CACA,MAAMW,EAAMC,KAAKC,MAAMd,GAASC,EAAMD,GAAS,GACzCe,EAASL,EAAGb,EAAUC,EAAKC,EAAMC,EAAOY,GAAMf,EAAUC,EAAKC,EAAMa,EAAKX,IAC9E,OAAOc,EAAS,EAAIN,EAAWX,EAAKC,EAAMW,EAAIV,EAAOY,GAC/CG,EAAS,EAAIN,EAAWX,EAAKC,EAAMW,EAAIE,EAAKX,GAAOW,CAC7D,GAEM,aAAEI,EAAY,UAAEC,EAAS,mBAAEC,EAAkB,cAC/CC,EAAa,cAAEC,EAAa,YAAEC,GAAgBC,WAE5CC,EAASP,EAAeC,EAAYC,EAEpCM,EAAkBA,CAAC1B,EAAKE,EAAOC,EAAKwB,KAAa,IAADC,EAAAC,EAElD,MA0BMC,EAAS9B,EAAI+B,iBAAiB/B,EAAIgC,KAAMP,EAAQ,CAAEQ,WA1BrChC,IAAS,IAADiC,EACvB,MAAMC,EAAqB,QAAjBD,EAAGjC,EAAKmC,iBAAS,IAAAF,OAAA,EAAdA,EAAgBG,cAE7B,GAAa,WAATF,GAA8B,UAATA,EAAkB,OAAOb,EAClD,GAAsB,IAAlBrB,EAAKqC,SAAgB,CACrB,MAAM,KAAEC,EAAI,MAAEC,GAAUb,EAAQ1B,EAAKwC,yBAErC,GAAID,EAAQtC,GAASqC,EAAOpC,EAAK,OAAOmB,EAGxC,GAAIiB,GAAQrC,GAASsC,GAASrC,EAAK,OAAOkB,CAI9C,KAAO,CAAC,IAADqB,EAEH,GAAmB,QAAfA,EAACzC,EAAKY,iBAAS,IAAA6B,IAAdA,EAAgBC,OAAQ,OAAOpB,EAEpC,MAAMhB,EAAQP,EAAIQ,cAClBD,EAAMqC,mBAAmB3C,GACzB,MAAM,KAAEsC,EAAI,MAAEC,GAAUb,EAAQpB,EAAMkC,yBAEtC,GAAID,GAAStC,GAASqC,GAAQpC,EAAK,OAAOkB,CAC9C,CACA,OAAOE,CAAW,IAGhBsB,EAAQ,GACd,IAAK,IAAI5C,EAAO6B,EAAOgB,WAAY7C,EAAMA,EAAO6B,EAAOgB,WACnDD,EAAME,KAAK9C,GAGf,MAAM+C,EAAe,QAAXpB,EAAGiB,EAAM,UAAE,IAAAjB,EAAAA,EAAI5B,EAAIgC,KACvBiB,EAA4B,QAA1BpB,EAAGgB,EAAMA,EAAMxC,OAAS,UAAE,IAAAwB,EAAAA,EAAImB,EAGhCE,EAAgC,IAAlBF,EAAKV,SAAiB,EACpC3B,EAAWX,EAAKgD,GAAM,CAACG,EAAGC,KACxB,MAAMC,EAAI1B,EAAQwB,EAAEV,yBACda,EAAI3B,EAAQyB,EAAEX,yBACpB,OAAIY,EAAEb,MAAQtC,GAASoD,EAAEf,KAAOrC,EAAc,EACvCoD,EAAEf,KAAOrC,GAAS,EAAI,CAAC,IAEhCqD,EAA4B,IAAhBN,EAAGX,SAAiB,EAChC3B,EAAWX,EAAKiD,GAAI,CAACE,EAAGC,KACtB,MAAMC,EAAI1B,EAAQwB,EAAEV,yBACda,EAAI3B,EAAQyB,EAAEX,yBACpB,OAAIY,EAAEb,MAAQrC,GAAOmD,EAAEf,KAAOpC,EAAY,EACnCmD,EAAEf,KAAOpC,GAAO,EAAI,CAAC,IAG9BI,EAAQP,EAAIQ,cAGlB,OAFAD,EAAME,SAASuC,EAAME,GACrB3C,EAAMG,OAAOuC,EAAIM,GACVhD,CAAK,EAcViD,EAAgBxD,IAClB,MAAMyD,EAAYzD,EAAI0D,YAAYC,iBAAiB3D,EAAIgC,MACvD,MAAqC,qBAA9ByB,EAAUG,iBACoB,SAA9BH,EAAUI,gBACX7D,EAAI0D,YAAYC,iBAAiB3D,EAAI8D,iBAAiBC,WACtDN,EAAUM,UAAU,EAGxBC,EAAgBA,CAAC3D,EAAQ4D,IAASC,MAAMlB,KAAK,CAAE3C,WAAU,KAC3D,MAAM8D,EAAMC,SAASC,cAAc,OAC7BC,EAAQF,SAASC,cAAc,OAGrC,OAFAF,EAAII,OAAOD,GACXA,EAAME,aAAa,OAAQP,GACpBE,CAAG,IAGRM,EAAqBA,CAACC,EAAIC,KAC5B,MAAM,MAAEC,GAAUF,EAClB,IAAK,MAAOG,EAAGC,KAAMC,OAAOC,QAAQL,GAASC,EAAMK,YAAYJ,EAAGC,EAAG,YAAY,EACpF,IAAAI,GAAAC,EAAAA,EAAAA,GAAA,YAAAC,GAAAD,EAAAA,EAAAA,GAAA,WAAAE,GAAAF,EAAAA,EAAAA,GAAA,UAAAG,GAAAH,EAAAA,EAAAA,GAAA,gBAAAI,GAAAJ,EAAAA,EAAAA,GAAA,aAAAK,GAAAL,EAAAA,EAAAA,GAAA,YAAAM,GAAAN,EAAAA,EAAAA,GAAA,OAAAO,GAAAP,EAAAA,EAAAA,GAAA,UAAAQ,GAAAR,EAAAA,EAAAA,GAAA,QAAAS,GAAAT,EAAAA,EAAAA,GAAA,UAED,MAAMU,EAWFC,WAAAA,CAAWC,GAA2B,IAA1B,UAAEC,EAAS,SAAEC,GAAUF,EAAAhB,OAAAmB,eAAA,KAAAhB,EAAA,CAAAiB,UAAA,EAAAC,MAVvB,IAAIC,gBAAe,IAAMC,KAAKC,aAASxB,OAAAmB,eAAA,KAAAd,EAAA,CAAAe,UAAA,EAAAC,MACxChC,SAASC,cAAc,SAAMU,OAAAmB,eAAA,KAAAb,EAAA,CAAAc,UAAA,EAAAC,MAC9BhC,SAASC,cAAc,YAASU,OAAAmB,eAAA,KAAAZ,EAAA,CAAAa,UAAA,EAAAC,MAC1BhC,SAAS5D,gBAAauE,OAAAmB,eAAA,KAAAX,EAAA,CAAAY,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAV,EAAA,CAAAW,UAAA,EAAAC,OAE1B,IAAKrB,OAAAmB,eAAA,KAAAT,EAAA,CAAAU,UAAA,EAAAC,OACV,IAAKrB,OAAAmB,eAAA,KAAAR,EAAA,CAAAS,UAAA,EAAAC,OACF,IAAIrB,OAAAmB,eAAA,KAAAP,EAAA,CAAAQ,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAN,EAAA,CAAAO,UAAA,EAAAC,MAEJ,CAAC,IAEPE,KAAKN,UAAYA,EACjBM,KAAKL,SAAWA,GAChBO,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAASb,aAAa,OAAQ,WAClCgC,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUb,QAAMiC,EAAAA,EAAAA,GAACF,KAAIjB,GAAAA,IACzBN,OAAO0B,QAAOD,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAO,CAC/B8B,UAAW,cACXC,SAAU,WACVC,SAAU,SACVC,KAAM,WACNC,MAAO,OAAQC,OAAQ,OACvBC,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAEhBnC,OAAO0B,QAAOD,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAO,CAC9BgC,SAAU,SACVO,OAAQ,IACRH,QAAS,OACTF,MAAO,OAAQC,OAAQ,UAI3BP,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAASb,aAAa,UAAW,oCACrCgC,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAASb,aAAa,YAAa,KAC3C,CACA,WAAI4C,GACA,OAAAZ,EAAAA,EAAAA,GAAOF,KAAIlB,GAAAA,EACf,CACA,YAAIhB,GACA,OAAOoC,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAASgC,eACxB,CACA,UAAMC,CAAKC,EAAKC,EAAWC,GACvB,GAAmB,kBAARF,EAAkB,MAAM,IAAIG,MAAM,GAADC,OAAIJ,EAAG,mBACnD,OAAO,IAAIK,SAAQC,KACfrB,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAASyC,iBAAiB,QAAQ,KAClC,MAAM9H,EAAMsG,KAAKlC,SACR,OAAToD,QAAS,IAATA,GAAAA,EAAYxH,IAGZwG,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAMoC,QAAU,QAC7B,MAAM,SAAEe,EAAQ,IAAEC,GApFbhI,KACjB,MAAM,YAAE0D,GAAgB1D,GAClB,YAAEiI,EAAW,UAAEC,GAAcxE,EAAYC,iBAAiB3D,EAAIgC,MAMpE,MAAO,CAAE+F,SALwB,gBAAhBE,GACM,gBAAhBA,EAIYD,IAHU,QAAjBhI,EAAIgC,KAAKmG,KACA,QAAdD,GAC4B,QAA5BlI,EAAI8D,gBAAgBqE,IACH,EA4EcC,CAAapI,GACjC+D,EAAaP,EAAcxD,IACjCwG,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAMoC,QAAU,QAE7BR,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAauC,GACjBvB,EAAAA,EAAAA,GAAAF,KAAIb,GAAAA,GAAQuC,GAEZxB,EAAAA,EAAAA,GAAAF,KAAIhB,GAAAA,GAAe1C,mBAAmB5C,EAAIgC,MAC1C,MAAMqG,EAAqB,OAAZZ,QAAY,IAAZA,OAAY,EAAZA,EAAe,CAAEM,WAAUC,MAAKjE,gBAC/CyC,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAMoC,QAAU,QAC7BV,KAAKgC,OAAOD,IACZ7B,EAAAA,EAAAA,GAAAF,KAAIpB,GAAAA,GAAWqD,QAAQvI,EAAIgC,MAK3BhC,EAAIwI,MAAMC,MAAMC,MAAK,IAAMpC,KAAKC,WAEhCsB,GAAS,GACV,CAAEc,MAAM,KACXnC,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAASkC,IAAMA,CAAG,GAE9B,CACAe,MAAAA,CAAOD,GACEA,KACL7B,EAAAA,EAAAA,GAAAF,KAAIZ,GAAAA,GAA2B,aAAhB2C,EAAOO,MACtBpC,EAAAA,EAAAA,GAAAF,KAAIV,GAAAA,GAAWyC,GACf7B,EAAAA,EAAAA,GAAIF,KAAIZ,GAAAA,GAAUY,KAAKuC,UAAUR,GAC5B/B,KAAKwC,SAAST,GACvB,CACAS,QAAAA,CAAQC,GAAwB,IAAvB,IAAEC,EAAG,YAAEC,GAAaF,EACzB,MAAMhB,GAAQvB,EAAAA,EAAAA,GAAGF,KAAId,GAAAA,GACfxF,EAAMsG,KAAKlC,SACjBK,EAAmBzE,EAAI8D,gBAAiB,CACpC,aAAc,aACd,QAAWiE,EAAQ,GAAAJ,OAAMqB,EAAG,aAAArB,OAAcqB,EAAG,MAC7C,eAAgB,OAChB,OAAU,OACV,MAAS,SAEbvE,EAAmBzE,EAAIgC,KAAM,CACzB,CAAC+F,EAAW,aAAe,aAAa,GAAFJ,OAAMsB,EAAW,MACvD,OAAU,SAEd3C,KAAK4C,eACL5C,KAAKC,QACT,CACAsC,SAAAA,CAASM,GAAuC,IAAtC,MAAErC,EAAK,OAAEC,EAAM,IAAEiC,EAAG,YAAEC,GAAaE,EACzC,MAAMpB,GAAQvB,EAAAA,EAAAA,GAAGF,KAAId,GAAAA,IACrBgB,EAAAA,EAAAA,GAAAF,KAAIX,GAAAA,GAASoC,EAAWhB,EAASD,EAEjC,MAAM9G,EAAMsG,KAAKlC,SACjBK,EAAmBzE,EAAI8D,gBAAiB,CACpC,aAAc,aACd,eAAe,GAAD6D,OAAK5G,KAAKqI,MAAMH,GAAY,MAC1C,aAAa,GAADtB,OAAKqB,EAAG,MACpB,cAAe,UACXjB,EACE,CAAE,MAAQ,GAADJ,OAAKb,EAAK,OACnB,CAAE,OAAS,GAADa,OAAKZ,EAAM,OAC3B,QAAWgB,EAAQ,GAAAJ,OAAMqB,EAAM,EAAC,aAAArB,OAAcqB,EAAM,EAAC,MACrD,SAAY,SAEZ,gBAAiB,aAEjB,SAAY,SAAU,OAAU,IAAK,OAAU,IAC/C,aAAc,OAAQ,YAAa,OACnC,aAAc,OAAQ,YAAa,OAEnC,2BAA4B,0BAEhCvE,EAAmBzE,EAAIgC,KAAM,CACzB,aAAc,OACd,YAAa,OACb,OAAU,MAEdsE,KAAK4C,eACL5C,KAAKC,QACT,CACA2C,YAAAA,GACI,MAAM,MAAEpC,EAAK,OAAEC,EAAM,OAAEsC,IAAQ7C,EAAAA,EAAAA,GAAGF,KAAIV,GAAAA,GAChCmC,GAAQvB,EAAAA,EAAAA,GAAGF,KAAId,GAAAA,GACfxF,EAAMsG,KAAKlC,SACjB,IAAK,MAAMM,KAAM1E,EAAIgC,KAAKsH,iBAAiB,mBAAoB,CAE3D,MAAM,UAAEC,EAAS,SAAEC,GAAaxJ,EAAI0D,YAAYC,iBAAiBe,GACjED,EAAmBC,EAAI,CACnB,aAAcqD,EACO,SAAdwB,GAAsC,QAAdA,EAAsBA,EAAY,OAAM,GAAA5B,OAC9DZ,EAAkB,EAATsC,EAAU,MAC5B,YAAatB,EAAQ,GAAAJ,OACZb,EAAiB,EAATuC,EAAU,MACP,SAAbG,GAAoC,QAAbA,EAAqBA,EAAW,OAC9D,aAAc,UACd,oBAAqB,QACrB,eAAgB,QAChB,aAAc,cAEtB,CACJ,CACAjD,MAAAA,GACI,MAAM,gBAAEzC,GAAoBwC,KAAKlC,SACjC,IAAAoC,EAAAA,EAAAA,GAAIF,KAAIZ,GAAAA,GAAU,CACd,MAAM+D,GAAOjD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAa,SAAW,QACnCkE,GAAYlD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAa,QAAU,SACvCmE,GAAcnD,EAAAA,EAAAA,GAAAF,KAAIhB,GAAAA,GAAe7C,wBACjCmH,EAAW9F,EAAgBrB,wBAK3BoH,IAFerD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAa,GAChCgB,EAAAA,EAAAA,GAAAF,KAAIb,GAAAA,GAAQmE,EAASpH,MAAQmH,EAAYnH,MAAQmH,EAAYpH,KAAOqH,EAASrH,MAChDoH,EAAYF,GAEzCK,EADY/I,KAAKgJ,KAAKF,GAAWrD,EAAAA,EAAAA,GAAGF,KAAIX,GAAAA,KAChBa,EAAAA,EAAAA,GAAGF,KAAIX,GAAAA,IACrCa,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAMoF,QAAU,KAC9BxD,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAM6E,GAAK,GAAA9B,OAAMmC,EAAY,OAC1CtD,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAM6E,GAAK,GAAA9B,OAAMmC,EAA4B,GAAbtD,EAAAA,EAAAA,GAAAF,KAAIX,GAAAA,GAAU,OAC5Da,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAM8E,GAAa,QAChClD,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAM8E,GAAa,OACjC5F,EAAgBc,MAAM6E,GAAK,GAAA9B,QAAAnB,EAAAA,EAAAA,GAAMF,KAAIX,GAAAA,GAAA,OACrCa,EAAAA,EAAAA,GAAIF,KAAIf,GAAAA,MACJiB,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAMyE,OAAS,KACvC7C,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAMrC,MAAOiE,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAa,IAAG,GAAAmC,QAAAnB,EAAAA,EAAAA,GAAMF,KAAIX,GAAAA,GAAA,OACnEa,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAMqF,KAAMzD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAA,GAAAmC,QAAAnB,EAAAA,EAAAA,GAAgBF,KAAIX,GAAAA,GAAA,MAAa,KACzEa,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAM6E,GAAK,GAAA9B,OAAMmC,EAAY,OACrDtD,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY2E,SAExB,KAAO,CACH,MAAMT,GAAOjD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAa,QAAU,SAClCkE,GAAYlD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAa,SAAW,QAExCsE,EADchG,EAAgBrB,wBAAwBgH,IAEtD,OAAEJ,IAAQ7C,EAAAA,EAAAA,GAAGF,KAAIV,GAAAA,GACjBoE,GAAUxD,EAAAA,EAAAA,GAAAF,KAAId,GAAAA,GAAA,KAAAmC,OAAkB0B,EAAM,SAAA1B,OAAU0B,EAAM,SAC5D7C,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAMoF,QAAUA,GAC9BxD,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAM6E,GAAK,GAAA9B,OAAMmC,EAAY,OAC1CtD,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAM6E,GAAK,GAAA9B,OAAMmC,EAAY,OAC3CtD,EAAAA,EAAAA,GAAAF,KAAIjB,GAAAA,GAAST,MAAM8E,GAAa,QAChClD,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUR,MAAM8E,GAAa,QACjClD,EAAAA,EAAAA,GAAIF,KAAIf,GAAAA,MACJiB,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAMyE,OAASW,GACvCxD,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAMrC,KAAO,KACrCiE,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAMqF,IAAM,KACpCzD,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY6B,QAAQxC,MAAM6E,GAAK,GAAA9B,OAAMmC,EAAY,OACrDtD,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAY2E,SAExB,CACA5D,KAAKL,UACT,CACA,aAAIkE,CAAUA,IACV3D,EAAAA,EAAAA,GAAAF,KAAIf,GAAAA,GAAc4E,GAClB3D,EAAAA,EAAAA,GAAAF,KAAIlB,GAAAA,GAAUb,OAAO4F,EAAU/C,QACnC,CACA,aAAI+C,GACA,OAAA3D,EAAAA,EAAAA,GAAOF,KAAIf,GAAAA,EACf,CACA6E,OAAAA,GACQ9D,KAAKlC,WAAUoC,EAAAA,EAAAA,GAAAF,KAAIpB,GAAAA,GAAWmF,UAAU/D,KAAKlC,SAASpC,KAC9D,EAGJ,IAAAsI,GAAAnF,EAAAA,EAAAA,GAAA,QAAAoF,GAAApF,EAAAA,EAAAA,GAAA,YAAAqF,GAAArF,EAAAA,EAAAA,GAAA,OAAAsF,GAAAtF,EAAAA,EAAAA,GAAA,cAAAuF,GAAAvF,EAAAA,EAAAA,GAAA,aAAAwF,GAAAxF,EAAAA,EAAAA,GAAA,UAAAyF,GAAAzF,EAAAA,EAAAA,GAAA,UAAA0F,GAAA1F,EAAAA,EAAAA,GAAA,QAAA2F,GAAA3F,EAAAA,EAAAA,GAAA,YAAA4F,GAAA5F,EAAAA,EAAAA,GAAA,OAAA6F,GAAA7F,EAAAA,EAAAA,GAAA,UAAA8F,GAAA9F,EAAAA,EAAAA,GAAA,SAAA+F,GAAA/F,EAAAA,EAAAA,GAAA,UAAAgG,GAAAhG,EAAAA,EAAAA,GAAA,gBAAAiG,GAAAjG,EAAAA,EAAAA,GAAA,UAAAkG,GAAAlG,EAAAA,EAAAA,GAAA,UAAAmG,GAAAnG,EAAAA,EAAAA,GAAA,YAAAoG,GAAApG,EAAAA,EAAAA,GAAA,cAAAqG,GAAArG,EAAAA,EAAAA,GAAA,sBAAAsG,GAAAtG,EAAAA,EAAAA,GAAA,gBAAAuG,GAAAvG,EAAAA,EAAAA,GAAA,cAAAwG,GAAAxG,EAAAA,EAAAA,GAAA,iBAAAyG,GAAAzG,EAAAA,EAAAA,GAAA,cAAA0G,GAAA1G,EAAAA,EAAAA,GAAA,gBAAA2G,IAAA3G,EAAAA,EAAAA,GAAA,gBAAA4G,IAAA5G,EAAAA,EAAAA,GAAA,eAAA6G,IAAA7G,EAAAA,EAAAA,GAAA,cAAA8G,IAAA9G,EAAAA,EAAAA,GAAA,iBAAA+G,IAAA/G,EAAAA,EAAAA,GAAA,gBAAAgH,IAAAhH,EAAAA,EAAAA,GAAA,YAAAiH,IAAAjH,EAAAA,EAAAA,GAAA,gBAAAkH,IAAAlH,EAAAA,EAAAA,GAAA,gBAAAmH,IAAAnH,EAAAA,EAAAA,GAAA,mBAAAoH,IAAApH,EAAAA,EAAAA,GAAA,eAAAqH,IAAArH,EAAAA,EAAAA,GAAA,WAAAsH,IAAAtH,EAAAA,EAAAA,GAAA,gBAAAuH,IAAAvH,EAAAA,EAAAA,GAAA,QAAAwH,IAAAxH,EAAAA,EAAAA,GAAA,cAAAyH,IAAAzH,EAAAA,EAAAA,GAAA,cAAA0H,IAAA1H,EAAAA,EAAAA,GAAA,iBAAA2H,IAAA3H,EAAAA,EAAAA,GAAA,YACO,MAAM4H,WAAkBC,YA2B3BlH,WAAAA,GACImH,QAAOlI,OAAAmB,eAAA,KAAA4G,GAAA,CAAA1G,MAAA8G,KAAAnI,OAAAmB,eAAA,KAAA2G,GAAA,CAAAzG,MAAA+G,KAAApI,OAAAmB,eAAA,KAAA0G,GAAA,CAAAxG,MAAAgH,KAAArI,OAAAmB,eAAA,KAAAyG,GAAA,CAAAvG,MAAAiH,KAAAtI,OAAAmB,eAAA,KAAAwG,GAAA,CAAAtG,MAAAkH,KAAAvI,OAAAmB,eAAA,KAAAuG,GAAA,CAAArG,MAAAmH,KAAAxI,OAAAmB,eAAA,KAAAsG,GAAA,CAAApG,MAAAoH,KAAAzI,OAAAmB,eAAA,KAAAqG,GAAA,CAAAnG,MAAAqH,KAAA1I,OAAAmB,eAAA,KAAAoG,GAAA,CAAAlG,MAAAsH,KAAA3I,OAAAmB,eAAA,KAAAmG,GAAA,CAAAjG,MAAAuH,KAAA5I,OAAAmB,eAAA,KAAAkG,GAAA,CAAAhG,MAAAwH,KAAA7I,OAAAmB,eAAA,KAAAiG,GAAA,CAAA/F,MAAAyH,KAAA9I,OAAAmB,eAAA,KAAAgG,GAAA,CAAA9F,MAAA0H,KAiWX/I,OAAAmB,eAAA,KAAA+F,GAAA,CAAA7F,MAAA2H,KAAAhJ,OAAAmB,eAAA,KAAA8F,GAAA,CAAA5F,MAAA4H,KAAAjJ,OAAAmB,eAAA,KAAA6F,GAAA,CAAA3F,MAAA6H,KAAAlJ,OAAAmB,eAAA,KAAA4F,GAAA,CAAA1F,MAAA8H,KAAAnJ,OAAAmB,eAAA,KAAA2F,EAAA,CAAAzF,MAAA+H,KAAApJ,OAAAmB,eAAA,KAAA0F,EAAA,CAAAxF,MAAAgI,KAAArJ,OAAAmB,eAAA,KAAAoE,EAAA,CAAAnE,UAAA,EAAAC,MAxXQE,KAAK+H,aAAa,CAAEC,KAAM,aAAWvJ,OAAAmB,eAAA,KAAAqE,EAAA,CAAApE,UAAA,EAAAC,MACjC,IAAIC,gBAAe,IAAMC,KAAKgC,aAASvD,OAAAmB,eAAA,KAAAsE,EAAA,CAAArE,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAuE,EAAA,CAAAtE,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAwE,EAAA,CAAAvE,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAyE,EAAA,CAAAxE,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAA0E,EAAA,CAAAzE,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAA2E,EAAA,CAAA1E,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAA4E,EAAA,CAAA3E,UAAA,EAAAC,OAOvC,IAAKrB,OAAAmB,eAAA,KAAA6E,EAAA,CAAA5E,UAAA,EAAAC,OACV,IAAKrB,OAAAmB,eAAA,KAAA8E,EAAA,CAAA7E,UAAA,EAAAC,MACF,IAACrB,OAAAmB,eAAA,KAAA+E,EAAA,CAAA9E,UAAA,EAAAC,OACD,IAACrB,OAAAmB,eAAA,KAAAgF,EAAA,CAAA/E,UAAA,EAAAC,MACD,IAAErB,OAAAmB,eAAA,KAAAiF,EAAA,CAAAhF,UAAA,EAAAC,OACI,IAAKrB,OAAAmB,eAAA,KAAAkF,EAAA,CAAAjF,UAAA,EAAAC,OACX,IAAMrB,OAAAmB,eAAA,KAAAmF,EAAA,CAAAlF,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAoF,EAAA,CAAAnF,UAAA,EAAAC,MAEJ,IAAImI,UAASxJ,OAAAmB,eAAA,KAAAqF,EAAA,CAAApF,UAAA,EAAAC,MACXoI,WAAW,kCAA+BzJ,OAAAmB,eAAA,KAAAsF,EAAA,CAAArF,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAuF,EAAA,CAAAtF,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAwF,EAAA,CAAAvF,UAAA,EAAAC,WAAA,IAAArB,OAAAmB,eAAA,KAAAyF,EAAA,CAAAxF,UAAA,EAAAC,WAAA,KAOpDI,EAAAA,EAAAA,GAAAF,KAAIgE,GAAAA,GAAOmE,UAAS,2qGAoGpBjI,EAAAA,EAAAA,GAAAF,KAAIkE,GAAAA,IAAQhE,EAAAA,EAAAA,GAAAF,KAAIgE,GAAAA,GAAOoE,eAAe,QACtClI,EAAAA,EAAAA,GAAAF,KAAImE,GAAAA,IAAejE,EAAAA,EAAAA,GAAAF,KAAIgE,GAAAA,GAAOoE,eAAe,eAC7ClI,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,IAAclE,EAAAA,EAAAA,GAAAF,KAAIgE,GAAAA,GAAOoE,eAAe,cAC5ClI,EAAAA,EAAAA,GAAAF,KAAIqE,GAAAA,IAAWnE,EAAAA,EAAAA,GAAAF,KAAIgE,GAAAA,GAAOoE,eAAe,WACzClI,EAAAA,EAAAA,GAAAF,KAAIsE,GAAAA,IAAWpE,EAAAA,EAAAA,GAAAF,KAAIgE,GAAAA,GAAOoE,eAAe,WAEzClI,EAAAA,EAAAA,GAAAF,KAAIiE,GAAAA,GAAWhC,SAAO/B,EAAAA,EAAAA,GAACF,KAAIoE,GAAAA,KAC3BlE,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,GAAY5C,iBAAiB,SAzfxB6G,EAACC,EAAGC,EAAMC,KACvB,IAAIC,EACJ,OAAO,WAAc,IAAD,IAAAC,EAAA5O,UAAAC,OAAT4O,EAAI,IAAA/K,MAAA8K,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJD,EAAIC,GAAA9O,UAAA8O,GACX,MAIMC,EAAUL,IAAcC,EAC1BA,GAASK,aAAaL,GAC1BA,EAAUM,YANIC,KACVP,EAAU,KACLD,GAAWF,KAAKK,EAAK,GAIFJ,GACxBM,GAASP,KAAKK,EACtB,CAAC,EA8e8CN,EAAS,KAC5CrI,KAAKwC,YACLtC,EAAAA,EAAAA,GAAIF,KAAI6E,GAAAA,IAAgB3E,EAAAA,EAAAA,GAAAF,KAAI6E,GAAAA,IAAiB,GACxC3E,EAAAA,EAAAA,GAAAF,KAAIiG,IAAAA,IAAc,UAC3B,GACD,MAEH,MAAMgD,EAAO,CAAEC,SAAS,GACxBlJ,KAAKwB,iBAAiB,cAActB,EAAAA,EAAAA,GAAAF,KAAIwF,IAAAA,IAAe2D,KAAKnJ,MAAOiJ,GACnEjJ,KAAKwB,iBAAiB,aAAatB,EAAAA,EAAAA,GAAAF,KAAIyF,IAAAA,IAAc0D,KAAKnJ,MAAOiJ,GACjEjJ,KAAKwB,iBAAiB,YAAYtB,EAAAA,EAAAA,GAAAF,KAAI0F,IAAAA,IAAayD,KAAKnJ,OACxDA,KAAKwB,iBAAiB,QAAQ4H,IAA0B,IAAvBC,QAAQ,IAAE3P,IAAO0P,EAC9C1P,EAAI8H,iBAAiB,cAActB,EAAAA,EAAAA,GAAAF,KAAIwF,IAAAA,IAAe2D,KAAKnJ,MAAOiJ,GAClEvP,EAAI8H,iBAAiB,aAAatB,EAAAA,EAAAA,GAAAF,KAAIyF,IAAAA,IAAc0D,KAAKnJ,MAAOiJ,GAChEvP,EAAI8H,iBAAiB,YAAYtB,EAAAA,EAAAA,GAAAF,KAAI0F,IAAAA,IAAayD,KAAKnJ,MAAM,KAGjEE,EAAAA,EAAAA,GAAAF,KAAIkF,GAAAA,GAAuB,MACnBhF,EAAAA,EAAAA,GAACF,KAAIuE,GAAAA,MACTrE,EAAAA,EAAAA,GAAAF,KAAImE,GAAAA,GAAa7F,MAAMb,WAAaP,GAAcgD,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,UAAS,GAE1EoC,EAAAA,EAAAA,GAAAF,KAAIiF,GAAAA,GAAazD,iBAAiB,UAAQtB,EAAAA,EAAAA,GAAEF,KAAIkF,GAAAA,GACpD,CACAoE,wBAAAA,CAAyBzN,EAAM0N,EAAGzJ,GAC9B,OAAQjE,GACJ,IAAK,OACDmE,KAAKgC,SACL,MACJ,IAAK,MACL,IAAK,SACL,IAAK,iBACL,IAAK,oBACD9B,EAAAA,EAAAA,GAAAF,KAAIkE,GAAAA,GAAM5F,MAAMK,YAAY,MAAQ9C,EAAMiE,GAC1C,MACJ,IAAK,mBAEDI,EAAAA,EAAAA,GAAAF,KAAIkE,GAAAA,GAAM5F,MAAMK,YAAY,MAAQ9C,EAAMiE,GAC1CE,KAAKgC,SAGjB,CACAwH,IAAAA,CAAKC,GACDzJ,KAAK0J,QAAUD,EAAK5H,IACpB7B,KAAK2J,SAAWF,EAAKE,QACzB,CA0FA3H,MAAAA,IACQ9B,EAAAA,EAAAA,GAACF,KAAIuE,GAAAA,MACTrE,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOvC,QAAM9B,EAAAA,EAAAA,GAACF,KAAIuF,GAAAA,GAAe,CACjC9D,UAAQvB,EAAAA,EAAAA,GAAEF,KAAIwE,GAAAA,GACd9C,KAAGxB,EAAAA,EAAAA,GAAEF,KAAIyE,GAAAA,MAEbzE,KAAK4J,gBAAc1J,EAAAA,EAAAA,GAACF,KAAI4E,GAAAA,IAC5B,CACA,YAAIpC,GACA,MAAqC,aAA9BxC,KAAK6J,aAAa,OAC7B,CACA,cAAIC,GACA,MAAM,SAAEtH,GAAaxC,KACrB,OAAOE,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GAAchC,EAAW,aAAe,YAC7CA,EAAW,YAAc,YACnC,CACA,YAAIuH,GACA,MAAM,SAAEvH,GAAaxC,KACrB,OAAOE,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GAAchC,EAAW,QAAU,SACxCA,EAAW,SAAW,OAChC,CACA,QAAIwH,GACA,OAAO9J,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,GAAYjI,wBAAwB6D,KAAK+J,SACxD,CACA,YAAIE,GACA,OAAO/J,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzD,QAAQ3E,wBAAwB6D,KAAK+J,SAC3D,CACA,SAAInQ,GACA,OAAOa,KAAKyP,KAAIhK,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,GAAYpE,KAAK8J,YACzC,CACA,OAAIjQ,GACA,OAAOmG,KAAKpG,MAAQoG,KAAKgK,IAC7B,CACA,QAAIG,GACA,OAAO1P,KAAKC,OAAQsF,KAAKpG,MAAQoG,KAAKnG,KAAO,EAAKmG,KAAKgK,KAC3D,CACA,SAAII,GACA,OAAO3P,KAAK4P,MAAMrK,KAAKiK,SAAWjK,KAAKgK,KAC3C,CACAM,QAAAA,CAASC,EAAIC,GACT,MAAMC,GAAQvK,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GAAagG,EAAKD,EAC9BzJ,GAAOZ,EAAAA,EAAAA,GAAGF,KAAIoE,GAAAA,IACd,WAAE0F,GAAe9J,MAChB0K,EAAQ7N,EAAGC,IAAEoD,EAAAA,EAAAA,GAAGF,KAAImF,GAAAA,GACrBzD,GAAGxB,EAAAA,EAAAA,GAAGF,KAAIyE,GAAAA,GACVkG,EAAMjJ,EAAMgJ,EAAS5N,EAAI4N,EAAS7N,EAClC+N,EAAMlJ,EAAMgJ,EAAS7N,EAAI6N,EAAS5N,EACxCgE,EAAQgJ,GAAcrP,KAAKmQ,IAAID,EAAKlQ,KAAKkQ,IAAIC,EACzC9J,EAAQgJ,GAAcW,GAC9B,CACAI,IAAAA,CAAKC,EAAIC,GACL,MAAMC,GAAW9K,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GAAauG,EAAKD,GAChCJ,EAAQ7N,EAAGC,IAAEoD,EAAAA,EAAAA,GAAGF,KAAImF,GAAAA,IACrB,MAAEvL,EAAK,IAAEC,EAAG,MAAEuQ,EAAK,KAAEJ,GAAShK,KAC9B2K,EAAMlQ,KAAKyP,IAAIQ,GAAU7N,EACzB+N,EAAMnQ,KAAKyP,IAAIQ,GAAU5N,EACzBmO,EAAID,IAAY9K,EAAAA,EAAAA,GAAAF,KAAIyE,GAAAA,IAASuF,EAAOA,GACpCG,EAAO1P,KAAKC,MACdD,KAAKmQ,IAAID,EAAKlQ,KAAKkQ,IAAIC,GAAMhR,EAAQC,GAAO,GACrCqR,MAAMD,GAAK,EAAIA,KAAOjB,IAEjC9J,EAAAA,EAAAA,GAAAF,KAAI8F,IAAAA,IAAeqE,EAAM,QAAQ/H,MAAK,KAClC,MAAMP,EAAMsI,GAAQ,GAAK,EAAIA,GAAQC,EAAQ,EAAI,EAAI,KACrD,GAAIvI,EAAK,OAAA3B,EAAAA,EAAAA,GAAOF,KAAIoG,IAAAA,IAAO,CACvB+E,OAAKjL,EAAAA,EAAAA,GAAEF,KAAIuG,IAAAA,IAAgB1E,GAC3BuJ,OAAQvJ,EAAM,EAAI,IAAM,EAAI,IAAM,GACpC,GAEV,CAiGA,oBAAM+H,CAAewB,EAAQC,GAAS,IAADC,EAAAC,GACjCrL,EAAAA,EAAAA,GAAAF,KAAI4E,GAAAA,GAAWwG,EACf,MAAMI,EAA0B,QAArBF,EAxwBArR,KACf,GAAU,OAALA,QAAK,IAALA,IAAAA,EAAOwR,UAAW,OAAOxR,EAC9B,MAAM,UAAEgD,EAAS,aAAEyO,GAAiBzR,EACpC,GAA8B,IAA1ByR,EAAa1P,SAAgB,OAAO0P,EACxC,GAAIzO,EAAY,EAAIyO,EAAa3R,OAAQE,EAAMG,OAAOsR,EAAczO,EAAY,OAC3E,MAAIA,EAAY,GAChB,OAAOyO,EAAaC,WADD1R,EAAME,SAASuR,EAAczO,EAAY,EAC9B,CACnC,OAAOhD,CAAK,EAiwBM2R,CAAWR,UAAO,IAAAE,GAAgB,QAAhBC,EAAlBD,EAAoBO,sBAAc,IAAAN,OAAhB,EAAlBA,EAAAO,KAAAR,GAEd,GAAIE,EAAO,CAGP,MAAMO,EAAOnO,MAAMlB,KAAK8O,GACnBQ,MAAKC,GAAKA,EAAEzL,MAAQ,GAAKyL,EAAExL,OAAS,KAAM+K,EAAM,GACrD,IAAKO,EAAM,OAGX,aAFA7L,EAAAA,EAAAA,GAAMF,KAAI4F,IAAAA,IAAemG,EAAM,eAC3BV,IAAQnL,EAAAA,EAAAA,GAAAF,KAAI+F,IAAAA,MAEpB,CAEA,GAAI/F,KAAKwC,SAEL,kBADAtC,EAAAA,EAAAA,GAAMF,KAAI6F,IAAAA,IAAWuF,EAASpL,KAAKiK,SAAU,UAGjD,MAAM,MAAEG,GAAUpK,KAClB,IAAKoK,EAAO,OACZ,MAAM8B,EAAY9B,EAAQ,EACpB+B,EAAU1R,KAAK4P,MAAMe,GAAUc,EAAY,UACjDhM,EAAAA,EAAAA,GAAMF,KAAI8F,IAAAA,IAAeqG,EAAU,EAAG,SAC1C,CAkFA,UAAMC,CAAKC,GACP,IAAAnM,EAAAA,EAAAA,GAAIF,KAAI8E,GAAAA,GAAU,OAClB,MAAMwH,QAAiBD,EACvB,OAAAnM,EAAAA,EAAAA,GAAIF,KAAImG,IAAAA,IAAemG,EAASnB,QAAQjL,EAAAA,EAAAA,GAAOF,KAAIoG,IAAAA,IAAOkG,QAA1D,CACJ,CAwBA,WAAIC,GACA,OAAkC,OAA3BrM,EAAAA,EAAAA,GAAAF,KAAIuG,IAAAA,KAAiB,IAAcvG,KAAKmK,MAAQ,CAC3D,CACA,SAAIqC,GACA,OAAiC,OAA1BtM,EAAAA,EAAAA,GAAAF,KAAIuG,IAAAA,IAAgB,IAAcvG,KAAKmK,MAAQnK,KAAKoK,MAAQ,CACvE,CAiBAqC,IAAAA,CAAKC,GACD,OAAAxM,EAAAA,EAAAA,GAAOF,KAAIwG,IAAAA,KAAY,EAAGkG,EAC9B,CACAC,IAAAA,CAAKD,GACD,OAAAxM,EAAAA,EAAAA,GAAOF,KAAIwG,IAAAA,IAAW,EAAGkG,EAC7B,CACAE,WAAAA,GACI,OAAO5M,KAAKoM,KAAK,CAAEjB,OAAKjL,EAAAA,EAAAA,GAAEF,KAAIuG,IAAAA,KAAiB,IACnD,CACAsG,WAAAA,GACI,OAAO7M,KAAKoM,KAAK,CAAEjB,OAAKjL,EAAAA,EAAAA,GAAEF,KAAIuG,IAAAA,IAAgB,IAClD,CACAuG,YAAAA,GACI,MAAM3B,EAAQnL,KAAK2J,SAASoD,WAAUC,GAA8B,OAAnBA,EAAQC,SACzD,OAAOjN,KAAKoM,KAAK,CAAEjB,SACvB,CACA+B,WAAAA,GACI,MAAM/B,EAAQnL,KAAK2J,SAASwD,eAAcH,GAA8B,OAAnBA,EAAQC,SAC7D,OAAOjN,KAAKoM,KAAK,CAAEjB,SACvB,CACAiC,WAAAA,GACI,OAAAlN,EAAAA,EAAAA,GAAIF,KAAIuE,GAAAA,GAAe,CAAC,CACpB4G,OAAKjL,EAAAA,EAAAA,GAAEF,KAAI2E,GAAAA,GACXd,WAAW3D,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOV,UACtBnK,KAAKwG,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,WAEb,EACX,CACAuP,SAAAA,CAAUhP,GAAS,IAADiP,EAAAC,EAAAC,EAAAC,EAAAC,GACdxN,EAAAA,EAAAA,GAAAF,KAAI+E,GAAAA,GAAW1G,EACf,MAAMsP,GAAWzN,EAAAA,EAAAA,GAAAF,KAAIgF,GAAAA,GAAW4I,IAAQ,QAALN,GAAApN,EAAAA,EAAAA,GAACF,KAAIuE,GAAAA,UAAA,IAAA+I,OAAA,EAAJA,EAAYxP,UAChD,IAAK6P,EAAU,OACf,MAAOE,EAAcC,GAAUH,EAC/B,GAAI/P,MAAMmQ,QAAQ1P,GAAS,CACvB,MAAO2P,EAAa1P,GAASD,EAC7BwP,EAAaI,YAAcD,EAC3BF,EAAOG,YAAc3P,CACzB,MAAOwP,EAAOG,YAAc5P,GAE5B6B,EAAAA,EAAAA,GAAAF,KAAImE,GAAAA,GAAa7F,MAAMb,WAAaP,GAAcgD,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,UAGzD,QAAJyP,GAAArN,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,UAAA,IAAAgJ,GAAgB,QAAhBC,EAAJD,EAAYzP,gBAAQ,IAAA0P,GAAO,QAAPC,EAApBD,EAAsBtL,aAAK,IAAAuL,GAAO,QAAPC,EAA3BD,EAA6BtL,aAAK,IAAAuL,GAAlCA,EAAoCtL,MAAK,KAAMlC,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOtE,UAC9D,CACA6D,OAAAA,GAAW,IAADoK,EAAAC,GACNjO,EAAAA,EAAAA,GAAAF,KAAIiE,GAAAA,GAAWF,UAAU/D,OACzBE,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOT,WACX5D,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAS,KACa,QAA1B2J,EAAAlO,KAAK2J,UAAQzJ,EAAAA,EAAAA,GAACF,KAAI2E,GAAAA,WAAQ,IAAAuJ,GAAQ,QAARC,EAA1BD,EAA4BE,cAAM,IAAAD,GAAlCA,EAAArC,KAAAoC,IACAhO,EAAAA,EAAAA,GAAAF,KAAIiF,GAAAA,GAAaoJ,oBAAoB,UAAQnO,EAAAA,EAAAA,GAAEF,KAAIkF,GAAAA,GACvD,EACH,SAAA4C,KAncO,OATA5H,EAAAA,EAAAA,GAAIF,KAAIuE,GAAAA,MACJrE,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOT,WACX5D,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,GAAYkK,aAAYpO,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzD,WAE3CZ,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAS,IAAIhF,EAAK,CAClBG,UAAWM,KACXL,SAAUA,IAAMK,KAAK4J,gBAAc1J,EAAAA,EAAAA,GAACF,KAAI4E,GAAAA,OAE5C1E,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,GAAYnG,QAAOiC,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzD,UAClCZ,EAAAA,EAAAA,GAAOF,KAAIuE,GAAAA,EACf,CAAC,SAAAsD,GAAA0G,GAC6C,IAAhC,SAAE9M,EAAQ,IAAEC,EAAG,WAAEjE,GAAY8Q,GACvCrO,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GAAa/C,GACjBvB,EAAAA,EAAAA,GAAAF,KAAIyE,GAAAA,GAAQ/C,GACZxB,EAAAA,EAAAA,GAAAF,KAAIkE,GAAAA,GAAMsK,UAAUC,OAAO,WAAYhN,IAIvCvB,EAAAA,EAAAA,GAAAF,KAAImE,GAAAA,GAAa7F,MAAMb,WAAaA,EAEpC,MAAM,MAAE+C,EAAK,OAAEC,IAAWP,EAAAA,EAAAA,GAAAF,KAAIoE,GAAAA,GAAYjI,wBACpC6N,EAAOvI,EAAWhB,EAASD,EAE3BlC,EAAQjB,kBAAgB6C,EAAAA,EAAAA,GAACF,KAAIkE,GAAAA,IAC7BwK,EAAgBC,WAAWrQ,EAAMsQ,iBAAiB,uBAClDC,EAAiBC,SAASxQ,EAAMsQ,iBAAiB,+BACjD7L,EAAS4L,WAAWrQ,EAAMsQ,iBAAiB,eACjD1O,EAAAA,EAAAA,GAAAF,KAAI0E,GAAAA,GAAW3B,EAEf,MAAMgM,EAAIJ,WAAWrQ,EAAMsQ,iBAAiB,WAAa,IAkBnDlM,GAAOqM,GAAKA,EAAI,GAAK/E,EAErB1H,EAAOtC,KAAK6J,aAAa,QAC/B,GAAa,aAATvH,EAAqB,CAErBtC,KAAK9B,aAAa,MAAOuD,EAAW,MAAQ,QAC5CvB,EAAAA,EAAAA,GAAAF,KAAIkE,GAAAA,GAAM5F,MAAMoF,QAAU,IAC1B,MAAMf,EAAc+L,EAOpB,OALA1O,KAAKgP,MAAQ,KACbhP,KAAKiP,KAAO,MACZ/O,EAAAA,EAAAA,GAAAF,KAAIqE,GAAAA,GAAS6K,mBACbhP,EAAAA,EAAAA,GAAAF,KAAIsE,GAAAA,GAAS4K,kBAEN,CAAE5M,OAAMS,SAAQL,MAAKC,cAChC,CAEA,MAAMwM,EAAU1U,KAAKkQ,IAAIkE,EAAgBpU,KAAKgJ,KAAKuG,EAAO0E,IACpD/L,EAAeqH,EAAOmF,EAAWzM,EACvC1C,KAAK9B,aAAa,MAAOwD,EAAM,MAAQ,OAEvC,MAAM0N,EAAkB3N,EAClBhH,KAAKkQ,IAAI,EAAGlQ,KAAKgJ,KAAKjD,EAAQkO,IAC9BS,EACAE,EAAgB,CAClBC,oBAAoB,UAADjO,OAAY+N,EAAe,UAC9C1M,IAAI,GAADrB,OAAKqB,EAAG,MACXgB,QAASjC,EAAW,IAAG,KAAAJ,OAAQqB,EAAM,EAAC,MACtCd,UAA4B,QAAjB5B,KAAK0J,QAAoB,MAAQ,OAEhDjL,OAAO0B,QAAOD,EAAAA,EAAAA,GAAAF,KAAIqE,GAAAA,GAAS/F,MAAO+Q,GAClC5Q,OAAO0B,QAAOD,EAAAA,EAAAA,GAAAF,KAAIsE,GAAAA,GAAShG,MAAO+Q,GAClC,MAAML,EAAQtR,EAAc0R,EAAiB,QACvCH,EAAOvR,EAAc0R,EAAiB,QAM5C,OALApP,KAAKgP,MAAQA,EAAMO,KAAInR,GAAMA,EAAGoR,SAAS,KACzCxP,KAAKiP,KAAOA,EAAKM,KAAInR,GAAMA,EAAGoR,SAAS,MACvCtP,EAAAA,EAAAA,GAAAF,KAAIqE,GAAAA,GAAS6K,mBAAmBF,IAChC9O,EAAAA,EAAAA,GAAAF,KAAIsE,GAAAA,GAAS4K,mBAAmBD,GAEzB,CAAExO,SAAQD,QAAOuC,SAAQL,MAAKC,cACzC,CAAC,SAAAiF,GAsEa6H,GACV,MAAMC,EAAQD,EAAEE,eAAe,IAC/BzP,EAAAA,EAAAA,GAAAF,KAAIoF,GAAAA,GAAe,CACf5L,EAAQ,OAALkW,QAAK,IAALA,OAAK,EAALA,EAAOE,QAASC,EAAQ,OAALH,QAAK,IAALA,OAAK,EAALA,EAAOI,QAC7BC,EAAGN,EAAEO,UACLlF,GAAI,EAAGmF,GAAI,EAEnB,CAAC,SAAAtI,GACY8H,GACT,MAAMS,GAAKhQ,EAAAA,EAAAA,GAAGF,KAAIoF,GAAAA,GAClB,GAAI8K,EAAMC,QAAS,OAEnB,GADAD,EAAMC,QAAUC,WAAWC,eAAeC,MAAQ,EAC9CtQ,KAAKwC,UAAY0N,EAAMC,QAAS,OACpC,GAAIV,EAAEc,QAAQxW,OAAS,EAEnB,aADAmG,EAAAA,EAAAA,GAAIF,KAAIqF,GAAAA,IAAiBoK,EAAEe,kBAG/Bf,EAAEe,iBACF,MAAMd,EAAQD,EAAEE,eAAe,GACzBnW,EAAIkW,EAAME,QAASC,EAAIH,EAAMI,QAC7BvF,EAAK2F,EAAM1W,EAAIA,EAAGgR,EAAK0F,EAAML,EAAIA,EACjCY,EAAKhB,EAAEO,UAAYE,EAAMH,EAC/BG,EAAM1W,EAAIA,EACV0W,EAAML,EAAIA,EACVK,EAAMH,EAAIN,EAAEO,UACZE,EAAMpF,GAAKP,EAAKkG,EAChBP,EAAMnF,GAAKP,EAAKiG,GAChBvQ,EAAAA,EAAAA,GAAAF,KAAIqF,GAAAA,IAAkB,EACtBrF,KAAKsK,SAASC,EAAIC,EACtB,CAAC,SAAA9C,MAEGxH,EAAAA,EAAAA,GAAAF,KAAIqF,GAAAA,IAAkB,EAClBrF,KAAKwC,UAKTkO,uBAAsB,KACsB,IAApCN,WAAWC,eAAeC,OAC1BtQ,KAAK6K,MAAK3K,EAAAA,EAAAA,GAAAF,KAAIoF,GAAAA,GAAa0F,IAAI5K,EAAAA,EAAAA,GAAAF,KAAIoF,GAAAA,GAAa2F,GAAG,GAE/D,CAAC,SAAAtD,KAGG,GAAIzH,KAAKwC,SAAU,CACf,MAAMwH,EAAOhK,KAAKiK,SACZlH,GAAM7C,EAAAA,EAAAA,GAAGF,KAAI0E,GAAAA,GACnB,OAAOxE,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GACLmM,IAAA,IAAC,KAAE1U,EAAI,MAAEC,GAAOyU,EAAA,MACb,CAAE1U,KAAM+N,EAAO9N,EAAQ6G,EAAQ7G,MAAO8N,EAAO/N,EAAO8G,EAAQ,EAC/D6N,IAAA,IAAC,IAAEjN,EAAG,OAAEkN,GAAQD,EAAA,MAAM,CAAE3U,KAAM0H,EAAMZ,EAAQ7G,MAAO2U,EAAS9N,EAAQ,CAC9E,CACA,MAAM+N,EAAS9Q,KAAKoK,MAAQpK,KAAKgK,KACjC,OAAO9J,EAAAA,EAAAA,GAAAF,KAAIyE,GAAAA,GACLsM,IAAA,IAAC,KAAE9U,EAAI,MAAEC,GAAO6U,EAAA,MACb,CAAE9U,KAAM6U,EAAS5U,EAAOA,MAAO4U,EAAS7U,EAAM,GACjDiE,EAAAA,EAAAA,GAAAF,KAAIwE,GAAAA,GACAwM,IAAA,IAAC,IAAErN,EAAG,OAAEkN,GAAQG,EAAA,MAAM,CAAE/U,KAAM0H,EAAKzH,MAAO2U,EAAQ,EAClDvI,GAAKA,CACnB,CAAC,eAAAd,GACmBuE,EAAMkF,GACtB,GAAIjR,KAAKwC,SAAU,CACf,MAAMkI,GAASxK,EAAAA,EAAAA,GAAAF,KAAI2F,IAAAA,KAAJzF,CAAsB6L,GAAM9P,MAAIiE,EAAAA,EAAAA,GAAGF,KAAI0E,GAAAA,GACtD,OAAAxE,EAAAA,EAAAA,GAAOF,KAAI6F,IAAAA,IAAW6E,EAAQuG,EAClC,CACA,MAAMvG,GAASxK,EAAAA,EAAAA,GAAAF,KAAI2F,IAAAA,KAAJzF,CAAsB6L,GAAM9P,MACrCiE,EAAAA,EAAAA,GAAAF,KAAI0E,GAAAA,GAAW,EACrB,OAAAxE,EAAAA,EAAAA,GAAOF,KAAI8F,IAAAA,IAAerL,KAAKC,MAAMgQ,EAAS1K,KAAKgK,QAAS9J,EAAAA,EAAAA,GAAAF,KAAIyE,GAAAA,IAAS,EAAI,GAAIwM,EACrF,CAAC,eAAA1J,GACemD,EAAQuG,EAAQC,GAC5B,MAAMpQ,GAAOZ,EAAAA,EAAAA,GAAGF,KAAIoE,GAAAA,IACd,WAAE0F,EAAU,KAAEE,GAAShK,KAC7B,OAAIc,EAAQgJ,KAAgBY,IACxBxK,EAAAA,EAAAA,GAAAF,KAAImF,GAAAA,GAAiB,CAACuF,EAAQ1K,KAAKuM,QAAU,EAAIvC,EAAMhK,KAAKwM,MAAQ,EAAIxC,QACxE9J,EAAAA,EAAAA,GAAAF,KAAIiG,IAAAA,IAAcgL,KAIlBjR,KAAKwC,WAAQtC,EAAAA,EAAAA,GAAIF,KAAIwE,GAAAA,KAAYkG,GAAUA,IAC/B,SAAXuG,GAAqBC,IAAWlR,KAAKmR,aAAa,aAnwB9CtU,EAowBLiE,EAAQgJ,GApwBAhN,EAowBa4N,EApwBV0G,EAowBkB,IApwBRC,EAowBa9X,EApwBPyI,EAqwB3BxI,GAAKsH,EAAQgJ,GAActQ,EArwBW,IAAI8H,SAAQC,IAC1D,IAAI3H,EACJ,MAAM0X,EAAOC,IAAQ,IAADC,EACX,QAALA,EAAA5X,SAAK,IAAA4X,IAAL5X,EAAU2X,GACV,MAAME,EAAWhX,KAAKkQ,IAAI,GAAI4G,EAAM3X,GAASwX,GANxCM,IAAC/G,EAAKC,EAOX5I,GAPM2I,EAOM9N,EAPD+N,EAOI9N,EAAGuU,EAAKI,IAPI7G,EAAMD,GAAOA,IAQpC8G,EAAW,EAAGf,sBAAsBY,GACnC/P,GAAS,EAElBmP,sBAAsBY,EAAK,KA6vBrBlP,MAAK,MACHlC,EAAAA,EAAAA,GAAAF,KAAImF,GAAAA,GAAiB,CAACuF,EAAQ1K,KAAKuM,QAAU,EAAIvC,EAAMhK,KAAKwM,MAAQ,EAAIxC,IACxE9J,EAAAA,EAAAA,GAAAF,KAAIiG,IAAAA,IAAcgL,EAAO,KAGzBnQ,EAAQgJ,GAAcY,GACtBxK,EAAAA,EAAAA,GAAAF,KAAImF,GAAAA,GAAiB,CAACuF,EAAQ1K,KAAKuM,QAAU,EAAIvC,EAAMhK,KAAKwM,MAAQ,EAAIxC,QACxE9J,EAAAA,EAAAA,GAAAF,KAAIiG,IAAAA,IAAcgL,KA7wBdU,IAAC9U,EAAGC,EAAGsU,EAAUC,EAAMrP,CA+wBnC,CAAC,eAAAsF,GACmB6C,EAAM8G,EAAQC,GAC9B,MAAMxG,EAAS1K,KAAKgK,OAAQ9J,EAAAA,EAAAA,GAAAF,KAAIyE,GAAAA,IAAS0F,EAAOA,GAChD,OAAAjK,EAAAA,EAAAA,GAAOF,KAAI6F,IAAAA,IAAW6E,EAAQuG,EAAQC,EAC1C,CAAC,SAAA7J,KA2BG,MAAM,YAAEjK,IAAgB8C,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,SACnC,IAAIoC,EAAAA,EAAAA,GAAAF,KAAI4E,GAAAA,GAASgN,eAAgB,CAC7B,MAAMC,EAAMzU,EAAY0U,eACxBD,EAAIE,kBACJF,EAAIG,UAAQ9R,EAAAA,EAAAA,GAACF,KAAI4E,GAAAA,GACrB,CACJ,CAAC,SAAAwC,KAEG,GAAIpH,KAAKwC,SAAU,OAAOpH,GAAgB8E,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,SACjDkC,KAAKpG,OAAKsG,EAAAA,EAAAA,GAAGF,KAAI0E,GAAAA,GAAU1E,KAAKnG,KAAGqG,EAAAA,EAAAA,GAAGF,KAAI0E,GAAAA,IAAQxE,EAAAA,EAAAA,GAAEF,KAAI2F,IAAAA,OAC5D,MAAMqE,GAAO9J,EAAAA,EAAAA,GAAAF,KAAIyE,GAAAA,IAASzE,KAAKgK,KAAOhK,KAAKgK,KAC3C,OAAO5O,GAAgB8E,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,SAC9BkC,KAAKpG,MAAQoQ,EAAMhK,KAAKnG,IAAMmQ,GAAI9J,EAAAA,EAAAA,GAAEF,KAAI2F,IAAAA,MAChD,CAAC,SAAAwB,GACY8J,GACT,MAAMhX,GAAKiG,EAAAA,EAAAA,GAAGF,KAAIgG,IAAAA,MAEH,WAAXiL,GAAqB/Q,EAAAA,EAAAA,GAAAF,KAAI4E,GAAAA,GAAW3K,GACnCiG,EAAAA,EAAAA,GAAAF,KAAI6E,GAAAA,IAAiB,EAE1B,MACMwE,EAAS,CAAE4H,SAAQhX,QAAOkR,OADrBjL,EAAAA,EAAAA,GAAGF,KAAI2E,GAAAA,IAElB,GAAI3E,KAAKwC,SAAU6G,EAAOoI,SAAWzR,KAAKpG,MAAQoG,KAAKiK,cAClD,GAAIjK,KAAKoK,MAAQ,EAAG,CACrB,MAAM,KAAED,EAAI,MAAEC,GAAUpK,MACxBE,EAAAA,EAAAA,GAAAF,KAAIqE,GAAAA,GAAS/F,MAAM2T,WAAa9H,EAAO,EAAI,UAAY,SACvDd,EAAOoI,UAAYtH,EAAO,IAAMC,EAAQ,GACxCf,EAAOW,KAAO,GAAKI,EAAQ,EAC/B,CACApK,KAAKkS,cAAc,IAAIC,YAAY,WAAY,CAAE9I,WACrD,CAAC,eAAAnC,GACckL,GAAU,IAADC,EACpB,MAAM,MAAElH,EAAK,IAAElK,EAAG,OAAEmK,EAAM,OAAEkH,EAAM,OAAEjH,SAAiB+G,EAErD,IADAlS,EAAAA,EAAAA,GAAAF,KAAI2E,GAAAA,GAAUwG,EACVlK,EAAK,CACL,MAAMsR,GAAIrS,EAAAA,EAAAA,GAAGF,KAAIsF,GAAAA,KACXpE,EAAYxH,IACd,GAAIA,EAAI8Y,KAAM,CACV,MAAMC,EAAe/Y,EAAIqE,cAAc,SACvCrE,EAAI8Y,KAAKE,QAAQD,GACjB,MAAM3E,EAASpU,EAAIqE,cAAc,SACjCrE,EAAI8Y,KAAKvU,OAAO6P,IAChB5N,EAAAA,EAAAA,GAAAF,KAAIgF,GAAAA,GAAW2N,IAAIjZ,EAAK,CAAC+Y,EAAc3E,GAC3C,CACM,OAANwE,QAAM,IAANA,GAAAA,EAAS,CAAE5Y,MAAKyR,SAAQ,EAEtBhK,GAAejB,EAAAA,EAAAA,GAAAF,KAAIuF,GAAAA,GAAe4D,KAAKnJ,YACvCuS,EAAKvR,KAAKC,EAAKC,EAAWC,GAChCnB,KAAKkS,cAAc,IAAIC,YAAY,mBAAoB,CACnD9I,OAAQ,CACJ3P,IAAK6Y,EAAKzU,SAAUqN,QACpByH,OAAQ/O,GAAa0O,EAAK1O,UAAYA,OAG9C3D,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAASgO,CACjB,OACMvS,KAAK4J,eAC+B,QADjByI,EAAoB,oBAAXjH,EAC5BA,GAAOlL,EAAAA,EAAAA,GAAAF,KAAIuE,GAAAA,GAAOzG,UAAYsN,SAAM,IAAAiH,EAAAA,EAAK,EAAGhH,EACtD,CAAC,SAAApE,GACakE,GACV,OAAOA,GAAS,GAAKA,GAASnL,KAAK2J,SAAS5P,OAAS,CACzD,CAAC,eAAAiN,GAAA6L,GACsC,IAA3B,MAAE1H,EAAK,OAAEC,EAAM,OAAEC,GAAOwH,EAChC,GAAI1H,KAAKjL,EAAAA,EAAAA,GAAKF,KAAI2E,GAAAA,SAASzE,EAAAA,EAAAA,GAAMF,KAAIkG,IAAAA,IAAU,CAAEiF,QAAOC,SAAQC,eAC3D,CACD,MAAMyH,GAAQ5S,EAAAA,EAAAA,GAAGF,KAAI2E,GAAAA,GACf2N,EAASjJ,IAAW,IAAD0J,EAAAC,EACE,QAAvBD,EAAA/S,KAAK2J,SAASmJ,UAAS,IAAAC,GAAQ,QAARC,EAAvBD,EAAyB3E,cAAM,IAAA4E,GAA/BA,EAAAlH,KAAAiH,GACA/S,KAAKqN,WAASnN,EAAAA,EAAAA,GAACF,KAAI+E,GAAAA,IACnB/E,KAAKkS,cAAc,IAAIC,YAAY,OAAQ,CAAE9I,WAAU,QAE3DnJ,EAAAA,EAAAA,GAAMF,KAAIkG,IAAAA,IAAU5E,QAAQC,QAAQvB,KAAK2J,SAASwB,GAAOnK,QACpDoB,MAAKnB,IAAG,CAAOkK,QAAOlK,MAAKmK,SAAQkH,SAAQjH,aAC3C4H,OAAMxD,IACHyD,QAAQC,KAAK1D,GACbyD,QAAQC,KAAK,IAAI/R,MAAM,0BAADC,OAA2B8J,KAC1C,CAAC,KAEpB,CACJ,CAAC,SAAApE,GAMW2F,GACR,KAAIxM,EAAAA,EAAAA,GAACF,KAAIuE,GAAAA,GAAQ,OAAO,EACxB,GAAIvE,KAAKwC,SACL,QAAIxC,KAAKpG,MAAQ,KAAGsG,EAAAA,EAAAA,GAAOF,KAAI6F,IAAAA,IAC3BpL,KAAKmQ,IAAI,EAAG5K,KAAKpG,OAAiB,OAAR8S,QAAQ,IAARA,EAAAA,EAAY1M,KAAKgK,OAAQ,MAAM,GAGjE,GAAIhK,KAAKuM,QAAS,OAClB,MAAMpC,EAAOnK,KAAKmK,KAAO,EACzB,OAAOjK,EAAAA,EAAAA,GAAAF,KAAI8F,IAAAA,IAAeqE,EAAM,QAAQ,GAAM/H,MAAK,IAAM+H,GAAQ,GACrE,CAAC,SAAArD,GACW4F,GACR,KAAIxM,EAAAA,EAAAA,GAACF,KAAIuE,GAAAA,GAAQ,OAAO,EACxB,GAAIvE,KAAKwC,SACL,QAAIxC,KAAKiK,SAAWjK,KAAKnG,IAAM,KAAGqG,EAAAA,EAAAA,GAAOF,KAAI6F,IAAAA,IACzCpL,KAAKkQ,IAAI3K,KAAKiK,SAAUyC,EAAW1M,KAAKpG,MAAQ8S,EAAW1M,KAAKnG,KAAM,MAAM,GAGpF,GAAImG,KAAKwM,MAAO,OAChB,MAAMrC,EAAOnK,KAAKmK,KAAO,EACnBC,EAAQpK,KAAKoK,MACnB,OAAOlK,EAAAA,EAAAA,GAAAF,KAAI8F,IAAAA,IAAeqE,EAAM,QAAQ,GAAM/H,MAAK,IAAM+H,GAAQC,EAAQ,GAC7E,CAAC,SAAAvD,GAOchF,GACX,IAAK,IAAIsJ,GAAQjL,EAAAA,EAAAA,GAAAF,KAAI2E,GAAAA,GAAU9C,GAAG3B,EAAAA,EAAAA,GAAEF,KAAImG,IAAAA,IAAegF,GAAQA,GAAStJ,EAAI,CAAD,IAAAuR,EACvE,GAAqC,QAAb,QAApBA,EAAApT,KAAK2J,SAASwB,UAAM,IAAAiI,OAAA,EAApBA,EAAsBnG,QAAiB,OAAO9B,CAAK,CAC/D,CAAC,eAAAvE,GACe/E,EAAK6K,GACjB,IAAAxM,EAAAA,EAAAA,GAAIF,KAAI8E,GAAAA,GAAU,QAClB5E,EAAAA,EAAAA,GAAAF,KAAI8E,GAAAA,IAAW,EACf,MAAM2H,GAAgB,IAAT5K,EACPwR,QAAkB5G,GAAIvM,EAAAA,EAAAA,GAAGF,KAAIqG,IAAAA,IAAaqG,IAAQxM,EAAAA,EAAAA,GAAIF,KAAIsG,IAAAA,IAAaoG,IA17BxE4G,MA27BDD,SAAUnT,EAAAA,EAAAA,GAAMF,KAAIoG,IAAAA,IAAO,CAC3B+E,OAAKjL,EAAAA,EAAAA,GAAEF,KAAIuG,IAAAA,IAAgB1E,GAC3BuJ,OAAQqB,EAAO,IAAM,EAAI,IAAM,KAE/B4G,GAAarT,KAAKmR,aAAa,mBA/7B9BmC,EA+7BsD,IA/7BhD,IAAIhS,SAAQC,GAAWwH,WAAWxH,EAAS+R,OAg8BtDpT,EAAAA,EAAAA,GAAAF,KAAI8E,GAAAA,IAAW,CACnB,CA9kBS2B,GACF8M,mBAAqB,CACxB,OAAQ,MAAO,SACf,kBAAmB,iBAAkB,oBAioB7CC,eAAeC,OAAO,oBAAqBhN,G","sources":["foliate-js/paginator.js"],"sourcesContent":["const wait = ms => new Promise(resolve => setTimeout(resolve, ms))\n\nconst debounce = (f, wait, immediate) => {\n    let timeout\n    return (...args) => {\n        const later = () => {\n            timeout = null\n            if (!immediate) f(...args)\n        }\n        const callNow = immediate && !timeout\n        if (timeout) clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) f(...args)\n    }\n}\n\nconst lerp = (min, max, x) => x * (max - min) + min\nconst easeOutQuad = x => 1 - (1 - x) * (1 - x)\nconst animate = (a, b, duration, ease, render) => new Promise(resolve => {\n    let start\n    const step = now => {\n        start ??= now\n        const fraction = Math.min(1, (now - start) / duration)\n        render(lerp(a, b, ease(fraction)))\n        if (fraction < 1) requestAnimationFrame(step)\n        else resolve()\n    }\n    requestAnimationFrame(step)\n})\n\n// collapsed range doesn't return client rects sometimes (or always?)\n// try make get a non-collapsed range or element\nconst uncollapse = range => {\n    if (!range?.collapsed) return range\n    const { endOffset, endContainer } = range\n    if (endContainer.nodeType === 1) return endContainer\n    if (endOffset + 1 < endContainer.length) range.setEnd(endContainer, endOffset + 1)\n    else if (endOffset > 1) range.setStart(endContainer, endOffset - 1)\n    else return endContainer.parentNode\n    return range\n}\n\nconst makeRange = (doc, node, start, end = start) => {\n    const range = doc.createRange()\n    range.setStart(node, start)\n    range.setEnd(node, end)\n    return range\n}\n\n// use binary search to find an offset value in a text node\nconst bisectNode = (doc, node, cb, start = 0, end = node.nodeValue.length) => {\n    if (end - start === 1) {\n        const result = cb(makeRange(doc, node, start), makeRange(doc, node, end))\n        return result < 0 ? start : end\n    }\n    const mid = Math.floor(start + (end - start) / 2)\n    const result = cb(makeRange(doc, node, start, mid), makeRange(doc, node, mid, end))\n    return result < 0 ? bisectNode(doc, node, cb, start, mid)\n        : result > 0 ? bisectNode(doc, node, cb, mid, end) : mid\n}\n\nconst { SHOW_ELEMENT, SHOW_TEXT, SHOW_CDATA_SECTION,\n    FILTER_ACCEPT, FILTER_REJECT, FILTER_SKIP } = NodeFilter\n\nconst filter = SHOW_ELEMENT | SHOW_TEXT | SHOW_CDATA_SECTION\n\nconst getVisibleRange = (doc, start, end, mapRect) => {\n    // first get all visible nodes\n    const acceptNode = node => {\n        const name = node.localName?.toLowerCase()\n        // ignore all scripts, styles, and their children\n        if (name === 'script' || name === 'style') return FILTER_REJECT\n        if (node.nodeType === 1) {\n            const { left, right } = mapRect(node.getBoundingClientRect())\n            // no need to check child nodes if it's completely out of view\n            if (right < start || left > end) return FILTER_REJECT\n            // elements must be completely in view to be considered visible\n            // because you can't specify offsets for elements\n            if (left >= start && right <= end) return FILTER_ACCEPT\n            // TODO: it should probably allow elements that do not contain text\n            // because they can exceed the whole viewport in both directions\n            // especially in scrolled mode\n        } else {\n            // ignore empty text nodes\n            if (!node.nodeValue?.trim()) return FILTER_SKIP\n            // create range to get rect\n            const range = doc.createRange()\n            range.selectNodeContents(node)\n            const { left, right } = mapRect(range.getBoundingClientRect())\n            // it's visible if any part of it is in view\n            if (right >= start && left <= end) return FILTER_ACCEPT\n        }\n        return FILTER_SKIP\n    }\n    const walker = doc.createTreeWalker(doc.body, filter, { acceptNode })\n    const nodes = []\n    for (let node = walker.nextNode(); node; node = walker.nextNode())\n        nodes.push(node)\n\n    // we're only interested in the first and last visible nodes\n    const from = nodes[0] ?? doc.body\n    const to = nodes[nodes.length - 1] ?? from\n\n    // find the offset at which visibility changes\n    const startOffset = from.nodeType === 1 ? 0\n        : bisectNode(doc, from, (a, b) => {\n            const p = mapRect(a.getBoundingClientRect())\n            const q = mapRect(b.getBoundingClientRect())\n            if (p.right < start && q.left > start) return 0\n            return q.left > start ? -1 : 1\n        })\n    const endOffset = to.nodeType === 1 ? 0\n        : bisectNode(doc, to, (a, b) => {\n            const p = mapRect(a.getBoundingClientRect())\n            const q = mapRect(b.getBoundingClientRect())\n            if (p.right < end && q.left > end) return 0\n            return q.left > end ? -1 : 1\n        })\n\n    const range = doc.createRange()\n    range.setStart(from, startOffset)\n    range.setEnd(to, endOffset)\n    return range\n}\n\nconst getDirection = doc => {\n    const { defaultView } = doc\n    const { writingMode, direction } = defaultView.getComputedStyle(doc.body)\n    const vertical = writingMode === 'vertical-rl'\n        || writingMode === 'vertical-lr'\n    const rtl = doc.body.dir === 'rtl'\n        || direction === 'rtl'\n        || doc.documentElement.dir === 'rtl'\n    return { vertical, rtl }\n}\n\nconst getBackground = doc => {\n    const bodyStyle = doc.defaultView.getComputedStyle(doc.body)\n    return bodyStyle.backgroundColor === 'rgba(0, 0, 0, 0)'\n        && bodyStyle.backgroundImage === 'none'\n        ? doc.defaultView.getComputedStyle(doc.documentElement).background\n        : bodyStyle.background\n}\n\nconst makeMarginals = (length, part) => Array.from({ length }, () => {\n    const div = document.createElement('div')\n    const child = document.createElement('div')\n    div.append(child)\n    child.setAttribute('part', part)\n    return div\n})\n\nconst setStylesImportant = (el, styles) => {\n    const { style } = el\n    for (const [k, v] of Object.entries(styles)) style.setProperty(k, v, 'important')\n}\n\nclass View {\n    #observer = new ResizeObserver(() => this.expand())\n    #element = document.createElement('div')\n    #iframe = document.createElement('iframe')\n    #contentRange = document.createRange()\n    #overlayer\n    #vertical = false\n    #rtl = false\n    #column = true\n    #size\n    #layout = {}\n    constructor({ container, onExpand }) {\n        this.container = container\n        this.onExpand = onExpand\n        this.#iframe.setAttribute('part', 'filter')\n        this.#element.append(this.#iframe)\n        Object.assign(this.#element.style, {\n            boxSizing: 'content-box',\n            position: 'relative',\n            overflow: 'hidden',\n            flex: '0 0 auto',\n            width: '100%', height: '100%',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n        })\n        Object.assign(this.#iframe.style, {\n            overflow: 'hidden',\n            border: '0',\n            display: 'none',\n            width: '100%', height: '100%',\n        })\n        // `allow-scripts` is needed for events because of WebKit bug\n        // https://bugs.webkit.org/show_bug.cgi?id=218086\n        this.#iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts')\n        this.#iframe.setAttribute('scrolling', 'no')\n    }\n    get element() {\n        return this.#element\n    }\n    get document() {\n        return this.#iframe.contentDocument\n    }\n    async load(src, afterLoad, beforeRender) {\n        if (typeof src !== 'string') throw new Error(`${src} is not string`)\n        return new Promise(resolve => {\n            this.#iframe.addEventListener('load', () => {\n                const doc = this.document\n                afterLoad?.(doc)\n\n                // it needs to be visible for Firefox to get computed style\n                this.#iframe.style.display = 'block'\n                const { vertical, rtl } = getDirection(doc)\n                const background = getBackground(doc)\n                this.#iframe.style.display = 'none'\n\n                this.#vertical = vertical\n                this.#rtl = rtl\n\n                this.#contentRange.selectNodeContents(doc.body)\n                const layout = beforeRender?.({ vertical, rtl, background })\n                this.#iframe.style.display = 'block'\n                this.render(layout)\n                this.#observer.observe(doc.body)\n\n                // the resize observer above doesn't work in Firefox\n                // (see https://bugzilla.mozilla.org/show_bug.cgi?id=1832939)\n                // until the bug is fixed we can at least account for font load\n                doc.fonts.ready.then(() => this.expand())\n\n                resolve()\n            }, { once: true })\n            this.#iframe.src = src\n        })\n    }\n    render(layout) {\n        if (!layout) return\n        this.#column = layout.flow !== 'scrolled'\n        this.#layout = layout\n        if (this.#column) this.columnize(layout)\n        else this.scrolled(layout)\n    }\n    scrolled({ gap, columnWidth }) {\n        const vertical = this.#vertical\n        const doc = this.document\n        setStylesImportant(doc.documentElement, {\n            'box-sizing': 'border-box',\n            'padding': vertical ? `${gap}px 0` : `0 ${gap}px`,\n            'column-width': 'auto',\n            'height': 'auto',\n            'width': 'auto',\n        })\n        setStylesImportant(doc.body, {\n            [vertical ? 'max-height' : 'max-width']: `${columnWidth}px`,\n            'margin': 'auto',\n        })\n        this.setImageSize()\n        this.expand()\n    }\n    columnize({ width, height, gap, columnWidth }) {\n        const vertical = this.#vertical\n        this.#size = vertical ? height : width\n\n        const doc = this.document\n        setStylesImportant(doc.documentElement, {\n            'box-sizing': 'border-box',\n            'column-width': `${Math.trunc(columnWidth)}px`,\n            'column-gap': `${gap}px`,\n            'column-fill': 'auto',\n            ...(vertical\n                ? { 'width': `${width}px` }\n                : { 'height': `${height}px` }),\n            'padding': vertical ? `${gap / 2}px 0` : `0 ${gap / 2}px`,\n            'overflow': 'hidden',\n            // force wrap long words\n            'overflow-wrap': 'break-word',\n            // reset some potentially problematic props\n            'position': 'static', 'border': '0', 'margin': '0',\n            'max-height': 'none', 'max-width': 'none',\n            'min-height': 'none', 'min-width': 'none',\n            // fix glyph clipping in WebKit\n            '-webkit-line-box-contain': 'block glyphs replaced',\n        })\n        setStylesImportant(doc.body, {\n            'max-height': 'none',\n            'max-width': 'none',\n            'margin': '0',\n        })\n        this.setImageSize()\n        this.expand()\n    }\n    setImageSize() {\n        const { width, height, margin } = this.#layout\n        const vertical = this.#vertical\n        const doc = this.document\n        for (const el of doc.body.querySelectorAll('img, svg, video')) {\n            // preserve max size if they are already set\n            const { maxHeight, maxWidth } = doc.defaultView.getComputedStyle(el)\n            setStylesImportant(el, {\n                'max-height': vertical\n                    ? (maxHeight !== 'none' && maxHeight !== '0px' ? maxHeight : '100%')\n                    : `${height - margin * 2}px`,\n                'max-width': vertical\n                    ? `${width - margin * 2}px`\n                    : (maxWidth !== 'none' && maxWidth !== '0px' ? maxWidth : '100%'),\n                'object-fit': 'contain',\n                'page-break-inside': 'avoid',\n                'break-inside': 'avoid',\n                'box-sizing': 'border-box',\n            })\n        }\n    }\n    expand() {\n        const { documentElement } = this.document\n        if (this.#column) {\n            const side = this.#vertical ? 'height' : 'width'\n            const otherSide = this.#vertical ? 'width' : 'height'\n            const contentRect = this.#contentRange.getBoundingClientRect()\n            const rootRect = documentElement.getBoundingClientRect()\n            // offset caused by column break at the start of the page\n            // which seem to be supported only by WebKit and only for horizontal writing\n            const contentStart = this.#vertical ? 0\n                : this.#rtl ? rootRect.right - contentRect.right : contentRect.left - rootRect.left\n            const contentSize = contentStart + contentRect[side]\n            const pageCount = Math.ceil(contentSize / this.#size)\n            const expandedSize = pageCount * this.#size\n            this.#element.style.padding = '0'\n            this.#iframe.style[side] = `${expandedSize}px`\n            this.#element.style[side] = `${expandedSize + this.#size * 2}px`\n            this.#iframe.style[otherSide] = '100%'\n            this.#element.style[otherSide] = '100%'\n            documentElement.style[side] = `${this.#size}px`\n            if (this.#overlayer) {\n                this.#overlayer.element.style.margin = '0'\n                this.#overlayer.element.style.left = this.#vertical ? '0' : `${this.#size}px`\n                this.#overlayer.element.style.top = this.#vertical ? `${this.#size}px` : '0'\n                this.#overlayer.element.style[side] = `${expandedSize}px`\n                this.#overlayer.redraw()\n            }\n        } else {\n            const side = this.#vertical ? 'width' : 'height'\n            const otherSide = this.#vertical ? 'height' : 'width'\n            const contentSize = documentElement.getBoundingClientRect()[side]\n            const expandedSize = contentSize\n            const { margin } = this.#layout\n            const padding = this.#vertical ? `0 ${margin}px` : `${margin}px 0`\n            this.#element.style.padding = padding\n            this.#iframe.style[side] = `${expandedSize}px`\n            this.#element.style[side] = `${expandedSize}px`\n            this.#iframe.style[otherSide] = '100%'\n            this.#element.style[otherSide] = '100%'\n            if (this.#overlayer) {\n                this.#overlayer.element.style.margin = padding\n                this.#overlayer.element.style.left = '0'\n                this.#overlayer.element.style.top = '0'\n                this.#overlayer.element.style[side] = `${expandedSize}px`\n                this.#overlayer.redraw()\n            }\n        }\n        this.onExpand()\n    }\n    set overlayer(overlayer) {\n        this.#overlayer = overlayer\n        this.#element.append(overlayer.element)\n    }\n    get overlayer() {\n        return this.#overlayer\n    }\n    destroy() {\n        if (this.document) this.#observer.unobserve(this.document.body)\n    }\n}\n\n// NOTE: everything here assumes the so-called \"negative scroll type\" for RTL\nexport class Paginator extends HTMLElement {\n    static observedAttributes = [\n        'flow', 'gap', 'margin',\n        'max-inline-size', 'max-block-size', 'max-column-count',\n    ]\n    #root = this.attachShadow({ mode: 'closed' })\n    #observer = new ResizeObserver(() => this.render())\n    #top\n    #background\n    #container\n    #header\n    #footer\n    #view\n    #vertical = false\n    #rtl = false\n    #margin = 0\n    #index = -1\n    #anchor = 0 // anchor view to a fraction (0-1), Range, or Element\n    #justAnchored = false\n    #locked = false // while true, prevent any further navigation\n    #styles\n    #styleMap = new WeakMap()\n    #mediaQuery = matchMedia('(prefers-color-scheme: dark)')\n    #mediaQueryListener\n    #scrollBounds\n    #touchState\n    #touchScrolled\n    constructor() {\n        super()\n        this.#root.innerHTML = `<style>\n        :host {\n            display: block;\n            container-type: size;\n        }\n        :host, #top {\n            box-sizing: border-box;\n            position: relative;\n            overflow: hidden;\n            width: 100%;\n            height: 100%;\n        }\n        #top {\n            --_gap: 7%;\n            --_margin: 48px;\n            --_max-inline-size: 720px;\n            --_max-block-size: 1440px;\n            --_max-column-count: 2;\n            --_max-column-count-portrait: 1;\n            --_max-column-count-spread: var(--_max-column-count);\n            --_half-gap: calc(var(--_gap) / 2);\n            --_max-width: calc(var(--_max-inline-size) * var(--_max-column-count-spread));\n            --_max-height: var(--_max-block-size);\n            display: grid;\n            grid-template-columns:\n                minmax(var(--_half-gap), 1fr)\n                minmax(0, var(--_max-width))\n                minmax(var(--_half-gap), 1fr);\n            grid-template-rows:\n                minmax(var(--_margin), 1fr)\n                minmax(0, var(--_max-height))\n                minmax(var(--_margin), 1fr);\n            &.vertical {\n                --_max-column-count-spread: var(--_max-column-count-portrait);\n                --_max-width: var(--_max-block-size);\n                --_max-height: calc(var(--_max-inline-size) * var(--_max-column-count-spread));\n            }\n            @container (orientation: portrait) {\n                & {\n                    --_max-column-count-spread: var(--_max-column-count-portrait);\n                }\n                &.vertical {\n                    --_max-column-count-spread: var(--_max-column-count);\n                }\n            }\n        }\n        #background {\n            grid-column-start: 1;\n            grid-column-end: 4;\n            grid-row-start: 1;\n            grid-row-end: 4;\n        }\n        #container {\n            grid-column-start: 2;\n            grid-row-start: 2;\n            overflow: hidden;\n        }\n        :host([flow=\"scrolled\"]) #container {\n            grid-column-start: 1;\n            grid-column-end: 4;\n            grid-row-start: 1;\n            grid-row-end: 4;\n            overflow: auto;\n        }\n        #header {\n            grid-column-start: 2;\n            grid-row-start: 1;\n        }\n        #footer {\n            grid-column-start: 2;\n            grid-row-start: 3;\n            align-self: end;\n        }\n        #header, #footer {\n            display: grid;\n            height: var(--_margin);\n        }\n        :is(#header, #footer) > * {\n            display: flex;\n            align-items: center;\n            min-width: 0;\n        }\n        :is(#header, #footer) > * > * {\n            width: 100%;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            text-align: center;\n            font-size: .75em;\n            opacity: .6;\n        }\n        </style>\n        <div id=\"top\">\n            <div id=\"background\" part=\"filter\"></div>\n            <div id=\"header\"></div>\n            <div id=\"container\"></div>\n            <div id=\"footer\"></div>\n        </div>\n        `\n\n        this.#top = this.#root.getElementById('top')\n        this.#background = this.#root.getElementById('background')\n        this.#container = this.#root.getElementById('container')\n        this.#header = this.#root.getElementById('header')\n        this.#footer = this.#root.getElementById('footer')\n\n        this.#observer.observe(this.#container)\n        this.#container.addEventListener('scroll', debounce(() => {\n            if (this.scrolled) {\n                if (this.#justAnchored) this.#justAnchored = false\n                else this.#afterScroll('scroll')\n            }\n        }, 250))\n\n        const opts = { passive: false }\n        this.addEventListener('touchstart', this.#onTouchStart.bind(this), opts)\n        this.addEventListener('touchmove', this.#onTouchMove.bind(this), opts)\n        this.addEventListener('touchend', this.#onTouchEnd.bind(this))\n        this.addEventListener('load', ({ detail: { doc } }) => {\n            doc.addEventListener('touchstart', this.#onTouchStart.bind(this), opts)\n            doc.addEventListener('touchmove', this.#onTouchMove.bind(this), opts)\n            doc.addEventListener('touchend', this.#onTouchEnd.bind(this))\n        })\n\n        this.#mediaQueryListener = () => {\n            if (!this.#view) return\n            this.#background.style.background = getBackground(this.#view.document)\n        }\n        this.#mediaQuery.addEventListener('change', this.#mediaQueryListener)\n    }\n    attributeChangedCallback(name, _, value) {\n        switch (name) {\n            case 'flow':\n                this.render()\n                break\n            case 'gap':\n            case 'margin':\n            case 'max-block-size':\n            case 'max-column-count':\n                this.#top.style.setProperty('--_' + name, value)\n                break\n            case 'max-inline-size':\n                // needs explicit `render()` as it doesn't necessarily resize\n                this.#top.style.setProperty('--_' + name, value)\n                this.render()\n                break\n        }\n    }\n    open(book) {\n        this.bookDir = book.dir\n        this.sections = book.sections\n    }\n    #createView() {\n        if (this.#view) {\n            this.#view.destroy()\n            this.#container.removeChild(this.#view.element)\n        }\n        this.#view = new View({\n            container: this,\n            onExpand: () => this.scrollToAnchor(this.#anchor),\n        })\n        this.#container.append(this.#view.element)\n        return this.#view\n    }\n    #beforeRender({ vertical, rtl, background }) {\n        this.#vertical = vertical\n        this.#rtl = rtl\n        this.#top.classList.toggle('vertical', vertical)\n\n        // set background to `doc` background\n        // this is needed because the iframe does not fill the whole element\n        this.#background.style.background = background\n\n        const { width, height } = this.#container.getBoundingClientRect()\n        const size = vertical ? height : width\n\n        const style = getComputedStyle(this.#top)\n        const maxInlineSize = parseFloat(style.getPropertyValue('--_max-inline-size'))\n        const maxColumnCount = parseInt(style.getPropertyValue('--_max-column-count-spread'))\n        const margin = parseFloat(style.getPropertyValue('--_margin'))\n        this.#margin = margin\n\n        const g = parseFloat(style.getPropertyValue('--_gap')) / 100\n        // The gap will be a percentage of the #container, not the whole view.\n        // This means the outer padding will be bigger than the column gap. Let\n        // `a` be the gap percentage. The actual percentage for the column gap\n        // will be (1 - a) * a. Let us call this `b`.\n        //\n        // To make them the same, we start by shrinking the outer padding\n        // setting to `b`, but keep the column gap setting the same at `a`. Then\n        // the actual size for the column gap will be (1 - b) * a. Repeating the\n        // process again and again, we get the sequence\n        //     x = (1 - b) * a\n        //     x = (1 - x) * a\n        //     ...\n        // which converges to x = (1 - x) * a. Solving for x, x = a / (1 + a).\n        // So to make the spacing even, we must shrink the outer padding with\n        //     f(x) = x / (1 + x).\n        // But we want to keep the outer padding, and make the inner gap bigger.\n        // So we apply the inverse, f = -x / (x - 1) to the column gap.\n        const gap = -g / (g - 1) * size\n\n        const flow = this.getAttribute('flow')\n        if (flow === 'scrolled') {\n            // FIXME: vertical-rl only, not -lr\n            this.setAttribute('dir', vertical ? 'rtl' : 'ltr')\n            this.#top.style.padding = '0'\n            const columnWidth = maxInlineSize\n\n            this.heads = null\n            this.feet = null\n            this.#header.replaceChildren()\n            this.#footer.replaceChildren()\n\n            return { flow, margin, gap, columnWidth }\n        }\n\n        const divisor = Math.min(maxColumnCount, Math.ceil(size / maxInlineSize))\n        const columnWidth = (size / divisor) - gap\n        this.setAttribute('dir', rtl ? 'rtl' : 'ltr')\n\n        const marginalDivisor = vertical\n            ? Math.min(2, Math.ceil(width / maxInlineSize))\n            : divisor\n        const marginalStyle = {\n            gridTemplateColumns: `repeat(${marginalDivisor}, 1fr)`,\n            gap: `${gap}px`,\n            padding: vertical ? '0' : `0 ${gap / 2}px`,\n            direction: this.bookDir === 'rtl' ? 'rtl' : 'ltr',\n        }\n        Object.assign(this.#header.style, marginalStyle)\n        Object.assign(this.#footer.style, marginalStyle)\n        const heads = makeMarginals(marginalDivisor, 'head')\n        const feet = makeMarginals(marginalDivisor, 'foot')\n        this.heads = heads.map(el => el.children[0])\n        this.feet = feet.map(el => el.children[0])\n        this.#header.replaceChildren(...heads)\n        this.#footer.replaceChildren(...feet)\n\n        return { height, width, margin, gap, columnWidth }\n    }\n    render() {\n        if (!this.#view) return\n        this.#view.render(this.#beforeRender({\n            vertical: this.#vertical,\n            rtl: this.#rtl,\n        }))\n        this.scrollToAnchor(this.#anchor)\n    }\n    get scrolled() {\n        return this.getAttribute('flow') === 'scrolled'\n    }\n    get scrollProp() {\n        const { scrolled } = this\n        return this.#vertical ? (scrolled ? 'scrollLeft' : 'scrollTop')\n            : scrolled ? 'scrollTop' : 'scrollLeft'\n    }\n    get sideProp() {\n        const { scrolled } = this\n        return this.#vertical ? (scrolled ? 'width' : 'height')\n            : scrolled ? 'height' : 'width'\n    }\n    get size() {\n        return this.#container.getBoundingClientRect()[this.sideProp]\n    }\n    get viewSize() {\n        return this.#view.element.getBoundingClientRect()[this.sideProp]\n    }\n    get start() {\n        return Math.abs(this.#container[this.scrollProp])\n    }\n    get end() {\n        return this.start + this.size\n    }\n    get page() {\n        return Math.floor(((this.start + this.end) / 2) / this.size)\n    }\n    get pages() {\n        return Math.round(this.viewSize / this.size)\n    }\n    scrollBy(dx, dy) {\n        const delta = this.#vertical ? dy : dx\n        const element = this.#container\n        const { scrollProp } = this\n        const [offset, a, b] = this.#scrollBounds\n        const rtl = this.#rtl\n        const min = rtl ? offset - b : offset - a\n        const max = rtl ? offset + a : offset + b\n        element[scrollProp] = Math.max(min, Math.min(max,\n            element[scrollProp] + delta))\n    }\n    snap(vx, vy) {\n        const velocity = this.#vertical ? vy : vx\n        const [offset, a, b] = this.#scrollBounds\n        const { start, end, pages, size } = this\n        const min = Math.abs(offset) - a\n        const max = Math.abs(offset) + b\n        const d = velocity * (this.#rtl ? -size : size)\n        const page = Math.floor(\n            Math.max(min, Math.min(max, (start + end) / 2\n                + (isNaN(d) ? 0 : d))) / size)\n\n        this.#scrollToPage(page, 'snap').then(() => {\n            const dir = page <= 0 ? -1 : page >= pages - 1 ? 1 : null\n            if (dir) return this.#goTo({\n                index: this.#adjacentIndex(dir),\n                anchor: dir < 0 ? () => 1 : () => 0,\n            })\n        })\n    }\n    #onTouchStart(e) {\n        const touch = e.changedTouches[0]\n        this.#touchState = {\n            x: touch?.screenX, y: touch?.screenY,\n            t: e.timeStamp,\n            vx: 0, xy: 0,\n        }\n    }\n    #onTouchMove(e) {\n        const state = this.#touchState\n        if (state.pinched) return\n        state.pinched = globalThis.visualViewport.scale > 1\n        if (this.scrolled || state.pinched) return\n        if (e.touches.length > 1) {\n            if (this.#touchScrolled) e.preventDefault()\n            return\n        }\n        e.preventDefault()\n        const touch = e.changedTouches[0]\n        const x = touch.screenX, y = touch.screenY\n        const dx = state.x - x, dy = state.y - y\n        const dt = e.timeStamp - state.t\n        state.x = x\n        state.y = y\n        state.t = e.timeStamp\n        state.vx = dx / dt\n        state.vy = dy / dt\n        this.#touchScrolled = true\n        this.scrollBy(dx, dy)\n    }\n    #onTouchEnd() {\n        this.#touchScrolled = false\n        if (this.scrolled) return\n\n        // XXX: Firefox seems to report scale as 1... sometimes...?\n        // at this point I'm basically throwing `requestAnimationFrame` at\n        // anything that doesn't work\n        requestAnimationFrame(() => {\n            if (globalThis.visualViewport.scale === 1)\n                this.snap(this.#touchState.vx, this.#touchState.vy)\n        })\n    }\n    // allows one to process rects as if they were LTR and horizontal\n    #getRectMapper() {\n        if (this.scrolled) {\n            const size = this.viewSize\n            const margin = this.#margin\n            return this.#vertical\n                ? ({ left, right }) =>\n                    ({ left: size - right - margin, right: size - left - margin })\n                : ({ top, bottom }) => ({ left: top + margin, right: bottom + margin })\n        }\n        const pxSize = this.pages * this.size\n        return this.#rtl\n            ? ({ left, right }) =>\n                ({ left: pxSize - right, right: pxSize - left })\n            : this.#vertical\n                ? ({ top, bottom }) => ({ left: top, right: bottom })\n                : f => f\n    }\n    async #scrollToRect(rect, reason) {\n        if (this.scrolled) {\n            const offset = this.#getRectMapper()(rect).left - this.#margin\n            return this.#scrollTo(offset, reason)\n        }\n        const offset = this.#getRectMapper()(rect).left\n            + this.#margin / 2\n        return this.#scrollToPage(Math.floor(offset / this.size) + (this.#rtl ? -1 : 1), reason)\n    }\n    async #scrollTo(offset, reason, smooth) {\n        const element = this.#container\n        const { scrollProp, size } = this\n        if (element[scrollProp] === offset) {\n            this.#scrollBounds = [offset, this.atStart ? 0 : size, this.atEnd ? 0 : size]\n            this.#afterScroll(reason)\n            return\n        }\n        // FIXME: vertical-rl only, not -lr\n        if (this.scrolled && this.#vertical) offset = -offset\n        if ((reason === 'snap' || smooth) && this.hasAttribute('animated')) return animate(\n            element[scrollProp], offset, 300, easeOutQuad,\n            x => element[scrollProp] = x,\n        ).then(() => {\n            this.#scrollBounds = [offset, this.atStart ? 0 : size, this.atEnd ? 0 : size]\n            this.#afterScroll(reason)\n        })\n        else {\n            element[scrollProp] = offset\n            this.#scrollBounds = [offset, this.atStart ? 0 : size, this.atEnd ? 0 : size]\n            this.#afterScroll(reason)\n        }\n    }\n    async #scrollToPage(page, reason, smooth) {\n        const offset = this.size * (this.#rtl ? -page : page)\n        return this.#scrollTo(offset, reason, smooth)\n    }\n    async scrollToAnchor(anchor, select) {\n        this.#anchor = anchor\n        const rects = uncollapse(anchor)?.getClientRects?.()\n        // if anchor is an element or a range\n        if (rects) {\n            // when the start of the range is immediately after a hyphen in the\n            // previous column, there is an extra zero width rect in that column\n            const rect = Array.from(rects)\n                .find(r => r.width > 0 && r.height > 0) || rects[0]\n            if (!rect) return\n            await this.#scrollToRect(rect, 'anchor')\n            if (select) this.#selectAnchor()\n            return\n        }\n        // if anchor is a fraction\n        if (this.scrolled) {\n            await this.#scrollTo(anchor * this.viewSize, 'anchor')\n            return\n        }\n        const { pages } = this\n        if (!pages) return\n        const textPages = pages - 2\n        const newPage = Math.round(anchor * (textPages - 1))\n        await this.#scrollToPage(newPage + 1, 'anchor')\n    }\n    #selectAnchor() {\n        const { defaultView } = this.#view.document\n        if (this.#anchor.startContainer) {\n            const sel = defaultView.getSelection()\n            sel.removeAllRanges()\n            sel.addRange(this.#anchor)\n        }\n    }\n    #getVisibleRange() {\n        if (this.scrolled) return getVisibleRange(this.#view.document,\n            this.start + this.#margin, this.end - this.#margin, this.#getRectMapper())\n        const size = this.#rtl ? -this.size : this.size\n        return getVisibleRange(this.#view.document,\n            this.start - size, this.end - size, this.#getRectMapper())\n    }\n    #afterScroll(reason) {\n        const range = this.#getVisibleRange()\n        // don't set new anchor if relocation was to scroll to anchor\n        if (reason !== 'anchor') this.#anchor = range\n        else this.#justAnchored = true\n\n        const index = this.#index\n        const detail = { reason, range, index }\n        if (this.scrolled) detail.fraction = this.start / this.viewSize\n        else if (this.pages > 0) {\n            const { page, pages } = this\n            this.#header.style.visibility = page > 1 ? 'visible' : 'hidden'\n            detail.fraction = (page - 1) / (pages - 2)\n            detail.size = 1 / (pages - 2)\n        }\n        this.dispatchEvent(new CustomEvent('relocate', { detail }))\n    }\n    async #display(promise) {\n        const { index, src, anchor, onLoad, select } = await promise\n        this.#index = index\n        if (src) {\n            const view = this.#createView()\n            const afterLoad = doc => {\n                if (doc.head) {\n                    const $styleBefore = doc.createElement('style')\n                    doc.head.prepend($styleBefore)\n                    const $style = doc.createElement('style')\n                    doc.head.append($style)\n                    this.#styleMap.set(doc, [$styleBefore, $style])\n                }\n                onLoad?.({ doc, index })\n            }\n            const beforeRender = this.#beforeRender.bind(this)\n            await view.load(src, afterLoad, beforeRender)\n            this.dispatchEvent(new CustomEvent('create-overlayer', {\n                detail: {\n                    doc: view.document, index,\n                    attach: overlayer => view.overlayer = overlayer,\n                },\n            }))\n            this.#view = view\n        }\n        await this.scrollToAnchor((typeof anchor === 'function'\n            ? anchor(this.#view.document) : anchor) ?? 0, select)\n    }\n    #canGoToIndex(index) {\n        return index >= 0 && index <= this.sections.length - 1\n    }\n    async #goTo({ index, anchor, select}) {\n        if (index === this.#index) await this.#display({ index, anchor, select })\n        else {\n            const oldIndex = this.#index\n            const onLoad = detail => {\n                this.sections[oldIndex]?.unload?.()\n                this.setStyles(this.#styles)\n                this.dispatchEvent(new CustomEvent('load', { detail }))\n            }\n            await this.#display(Promise.resolve(this.sections[index].load())\n                .then(src => ({ index, src, anchor, onLoad, select }))\n                .catch(e => {\n                    console.warn(e)\n                    console.warn(new Error(`Failed to load section ${index}`))\n                    return {}\n                }))\n        }\n    }\n    async goTo(target) {\n        if (this.#locked) return\n        const resolved = await target\n        if (this.#canGoToIndex(resolved.index)) return this.#goTo(resolved)\n    }\n    #scrollPrev(distance) {\n        if (!this.#view) return true\n        if (this.scrolled) {\n            if (this.start > 0) return this.#scrollTo(\n                Math.max(0, this.start - (distance ?? this.size)), null, true)\n            return true\n        }\n        if (this.atStart) return\n        const page = this.page - 1\n        return this.#scrollToPage(page, 'page', true).then(() => page <= 0)\n    }\n    #scrollNext(distance) {\n        if (!this.#view) return true\n        if (this.scrolled) {\n            if (this.viewSize - this.end > 2) return this.#scrollTo(\n                Math.min(this.viewSize, distance ? this.start + distance : this.end), null, true)\n            return true\n        }\n        if (this.atEnd) return\n        const page = this.page + 1\n        const pages = this.pages\n        return this.#scrollToPage(page, 'page', true).then(() => page >= pages - 1)\n    }\n    get atStart() {\n        return this.#adjacentIndex(-1) == null && this.page <= 1\n    }\n    get atEnd() {\n        return this.#adjacentIndex(1) == null && this.page >= this.pages - 2\n    }\n    #adjacentIndex(dir) {\n        for (let index = this.#index + dir; this.#canGoToIndex(index); index += dir)\n            if (this.sections[index]?.linear !== 'no') return index\n    }\n    async #turnPage(dir, distance) {\n        if (this.#locked) return\n        this.#locked = true\n        const prev = dir === -1\n        const shouldGo = await (prev ? this.#scrollPrev(distance) : this.#scrollNext(distance))\n        if (shouldGo) await this.#goTo({\n            index: this.#adjacentIndex(dir),\n            anchor: prev ? () => 1 : () => 0,\n        })\n        if (shouldGo || !this.hasAttribute('animated')) await wait(100)\n        this.#locked = false\n    }\n    prev(distance) {\n        return this.#turnPage(-1, distance)\n    }\n    next(distance) {\n        return this.#turnPage(1, distance)\n    }\n    prevSection() {\n        return this.goTo({ index: this.#adjacentIndex(-1) })\n    }\n    nextSection() {\n        return this.goTo({ index: this.#adjacentIndex(1) })\n    }\n    firstSection() {\n        const index = this.sections.findIndex(section => section.linear !== 'no')\n        return this.goTo({ index })\n    }\n    lastSection() {\n        const index = this.sections.findLastIndex(section => section.linear !== 'no')\n        return this.goTo({ index })\n    }\n    getContents() {\n        if (this.#view) return [{\n            index: this.#index,\n            overlayer: this.#view.overlayer,\n            doc: this.#view.document,\n        }]\n        return []\n    }\n    setStyles(styles) {\n        this.#styles = styles\n        const $$styles = this.#styleMap.get(this.#view?.document)\n        if (!$$styles) return\n        const [$beforeStyle, $style] = $$styles\n        if (Array.isArray(styles)) {\n            const [beforeStyle, style] = styles\n            $beforeStyle.textContent = beforeStyle\n            $style.textContent = style\n        } else $style.textContent = styles\n\n        this.#background.style.background = getBackground(this.#view.document)\n\n        // needed because the resize observer doesn't work in Firefox\n        this.#view?.document?.fonts?.ready?.then(() => this.#view.expand())\n    }\n    destroy() {\n        this.#observer.unobserve(this)\n        this.#view.destroy()\n        this.#view = null\n        this.sections[this.#index]?.unload?.()\n        this.#mediaQuery.removeEventListener('change', this.#mediaQueryListener)\n    }\n}\n\ncustomElements.define('foliate-paginator', Paginator)\n"],"names":["easeOutQuad","x","makeRange","doc","node","start","end","arguments","length","undefined","range","createRange","setStart","setEnd","bisectNode","cb","nodeValue","mid","Math","floor","result","SHOW_ELEMENT","SHOW_TEXT","SHOW_CDATA_SECTION","FILTER_ACCEPT","FILTER_REJECT","FILTER_SKIP","NodeFilter","filter","getVisibleRange","mapRect","_nodes$","_nodes","walker","createTreeWalker","body","acceptNode","_node$localName","name","localName","toLowerCase","nodeType","left","right","getBoundingClientRect","_node$nodeValue","trim","selectNodeContents","nodes","nextNode","push","from","to","startOffset","a","b","p","q","endOffset","getBackground","bodyStyle","defaultView","getComputedStyle","backgroundColor","backgroundImage","documentElement","background","makeMarginals","part","Array","div","document","createElement","child","append","setAttribute","setStylesImportant","el","styles","style","k","v","Object","entries","setProperty","_observer","_classPrivateFieldLooseKey","_element","_iframe","_contentRange","_overlayer","_vertical","_rtl","_column","_size","_layout","View","constructor","_ref","container","onExpand","defineProperty","writable","value","ResizeObserver","this","expand","_classPrivateFieldLooseBase","assign","boxSizing","position","overflow","flex","width","height","display","justifyContent","alignItems","border","element","contentDocument","load","src","afterLoad","beforeRender","Error","concat","Promise","resolve","addEventListener","vertical","rtl","writingMode","direction","dir","getDirection","layout","render","observe","fonts","ready","then","once","flow","columnize","scrolled","_ref2","gap","columnWidth","setImageSize","_ref3","trunc","margin","querySelectorAll","maxHeight","maxWidth","side","otherSide","contentRect","rootRect","contentSize","expandedSize","ceil","padding","top","redraw","overlayer","destroy","unobserve","_root","_observer2","_top","_background","_container","_header","_footer","_view","_vertical2","_rtl2","_margin","_index","_anchor","_justAnchored","_locked","_styles","_styleMap","_mediaQuery","_mediaQueryListener","_scrollBounds","_touchState","_touchScrolled","_createView","_beforeRender","_onTouchStart","_onTouchMove","_onTouchEnd","_getRectMapper","_scrollToRect","_scrollTo","_scrollToPage","_selectAnchor","_getVisibleRange","_afterScroll","_display","_canGoToIndex","_goTo","_scrollPrev","_scrollNext","_adjacentIndex","_turnPage","Paginator","HTMLElement","super","_turnPage2","_adjacentIndex2","_scrollNext2","_scrollPrev2","_goTo2","_canGoToIndex2","_display2","_afterScroll2","_getVisibleRange2","_selectAnchor2","_scrollToPage2","_scrollTo2","_scrollToRect2","_getRectMapper2","_onTouchEnd2","_onTouchMove2","_onTouchStart2","_beforeRender2","_createView2","attachShadow","mode","WeakMap","matchMedia","innerHTML","getElementById","debounce","f","wait","immediate","timeout","_len","args","_key","callNow","clearTimeout","setTimeout","later","opts","passive","bind","_ref4","detail","attributeChangedCallback","_","open","book","bookDir","sections","scrollToAnchor","getAttribute","scrollProp","sideProp","size","viewSize","abs","page","pages","round","scrollBy","dx","dy","delta","offset","min","max","snap","vx","vy","velocity","d","isNaN","index","anchor","select","_uncollapse","_uncollapse$getClient","rects","collapsed","endContainer","parentNode","uncollapse","getClientRects","call","rect","find","r","textPages","newPage","goTo","target","resolved","atStart","atEnd","prev","distance","next","prevSection","nextSection","firstSection","findIndex","section","linear","lastSection","findLastIndex","getContents","setStyles","_classPrivateFieldLoo","_classPrivateFieldLoo2","_classPrivateFieldLoo3","_classPrivateFieldLoo4","_classPrivateFieldLoo5","$$styles","get","$beforeStyle","$style","isArray","beforeStyle","textContent","_this$sections$_class","_this$sections$_class2","unload","removeEventListener","removeChild","_ref5","classList","toggle","maxInlineSize","parseFloat","getPropertyValue","maxColumnCount","parseInt","g","heads","feet","replaceChildren","divisor","marginalDivisor","marginalStyle","gridTemplateColumns","map","children","e","touch","changedTouches","screenX","y","screenY","t","timeStamp","xy","state","pinched","globalThis","visualViewport","scale","touches","preventDefault","dt","requestAnimationFrame","_ref6","_ref7","bottom","pxSize","_ref8","_ref9","reason","smooth","hasAttribute","duration","ease","step","now","_start","fraction","lerp","animate","startContainer","sel","getSelection","removeAllRanges","addRange","visibility","dispatchEvent","CustomEvent","promise","_ref10","onLoad","view","head","$styleBefore","prepend","set","attach","_ref11","oldIndex","_this$sections$oldInd","_this$sections$oldInd2","catch","console","warn","_this$sections$index","shouldGo","ms","observedAttributes","customElements","define"],"sourceRoot":""}