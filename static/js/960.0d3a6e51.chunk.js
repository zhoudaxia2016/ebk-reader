"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[960],{960:(t,e,i)=>{i.r(e),i.d(e,{FixedLayout:()=>m});var n=i(473),s=i(341);const l=t=>{var e,i;return null===t||void 0===t||null===(e=t.split(/[,;\s]/))||void 0===e||null===(i=e.filter((t=>t)))||void 0===i?void 0:i.map((t=>t.split("=").map((t=>t.trim()))))};var r=(0,s.A)("root"),o=(0,s.A)("observer"),h=(0,s.A)("spreads"),d=(0,s.A)("index"),a=(0,s.A)("portrait"),c=(0,s.A)("left"),u=(0,s.A)("right"),v=(0,s.A)("center"),f=(0,s.A)("side"),p=(0,s.A)("createFrame"),A=(0,s.A)("render"),g=(0,s.A)("showSpread"),b=(0,s.A)("goLeft"),w=(0,s.A)("goRight"),y=(0,s.A)("reportLocation");class m extends HTMLElement{constructor(){super(),Object.defineProperty(this,y,{value:P}),Object.defineProperty(this,w,{value:S}),Object.defineProperty(this,b,{value:k}),Object.defineProperty(this,g,{value:j}),Object.defineProperty(this,A,{value:O}),Object.defineProperty(this,p,{value:x}),Object.defineProperty(this,r,{writable:!0,value:this.attachShadow({mode:"closed"})}),Object.defineProperty(this,o,{writable:!0,value:new ResizeObserver((()=>(0,n.A)(this,A)[A]()))}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:-1}),Object.defineProperty(this,a,{writable:!0,value:!1}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0});const t=new CSSStyleSheet;(0,n.A)(this,r)[r].adoptedStyleSheets=[t],t.replaceSync(":host {\n            width: 100%;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }"),(0,n.A)(this,o)[o].observe(this)}open(t){this.book=t;const{rendition:e}=t;this.spread=null===e||void 0===e?void 0:e.spread,this.defaultViewport=null===e||void 0===e?void 0:e.viewport;const i="rtl"===t.dir,s=!i;this.rtl=i,"none"===(null===e||void 0===e?void 0:e.spread)?(0,n.A)(this,h)[h]=t.sections.map((t=>({center:t}))):(0,n.A)(this,h)[h]=t.sections.reduce(((t,e)=>{const n=t[t.length-1],{linear:l,pageSpread:r}=e;if("no"===l)return t;const o=()=>{const e={};return t.push(e),e};if("center"===r){(n.left||n.right?o():n).center=e}else if("left"===r){(n.center||n.left||s?o():n).left=e}else if("right"===r){(n.center||n.right||i?o():n).right=e}else s?n.center||n.right?o().left=e:n.left?n.right=e:n.left=e:n.center||n.left?o().right=e:n.right?n.left=e:n.right=e;return t}),[{}])}get index(){var t,e,i;const s=(0,n.A)(this,h)[h][(0,n.A)(this,d)[d]],l=null!==(t=null===s||void 0===s?void 0:s.center)&&void 0!==t?t:"left"===this.side?null!==(e=s.left)&&void 0!==e?e:s.right:null!==(i=s.right)&&void 0!==i?i:s.left;return this.book.sections.indexOf(l)}getSpreadOf(t){const e=(0,n.A)(this,h)[h];for(let i=0;i<e.length;i++){const{left:n,right:s,center:l}=e[i];if(n===t)return{index:i,side:"left"};if(s===t)return{index:i,side:"right"};if(l===t)return{index:i,side:"center"}}}async goToSpread(t,e,i){if(t<0||t>(0,n.A)(this,h)[h].length-1)return;if(t===(0,n.A)(this,d)[d])return void(0,n.A)(this,A)[A](e);(0,n.A)(this,d)[d]=t;const s=(0,n.A)(this,h)[h][t];if(s.center){var l,r;const t=this.book.sections.indexOf(s.center),e=await(null===(l=s.center)||void 0===l||null===(r=l.load)||void 0===r?void 0:r.call(l));await(0,n.A)(this,g)[g]({center:{index:t,src:e}})}else{var o,a,c,u;const t=this.book.sections.indexOf(s.left),i=this.book.sections.indexOf(s.right),l={index:t,src:await(null===(o=s.left)||void 0===o||null===(a=o.load)||void 0===a?void 0:a.call(o))},r={index:i,src:await(null===(c=s.right)||void 0===c||null===(u=c.load)||void 0===u?void 0:u.call(c))};await(0,n.A)(this,g)[g]({left:l,right:r,side:e})}(0,n.A)(this,y)[y](i)}async select(t){await this.goTo(t)}async goTo(t){const{book:e}=this,i=await t,n=e.sections[i.index];if(!n)return;const{index:s,side:l}=this.getSpreadOf(n);await this.goToSpread(s,l)}async next(){if(!(this.rtl?(0,n.A)(this,b)[b]():(0,n.A)(this,w)[w]()))return this.goToSpread((0,n.A)(this,d)[d]+1,this.rtl?"right":"left","page");(0,n.A)(this,y)[y]("page")}async prev(){if(!(this.rtl?(0,n.A)(this,w)[w]():(0,n.A)(this,b)[b]()))return this.goToSpread((0,n.A)(this,d)[d]-1,this.rtl?"left":"right","page");(0,n.A)(this,y)[y]("page")}getContents(){return Array.from((0,n.A)(this,r)[r].querySelectorAll("iframe"),(t=>({doc:t.contentDocument})))}destroy(){(0,n.A)(this,o)[o].unobserve(this)}}async function x(t){let{index:e,src:i}=t;const s=document.createElement("div"),o=document.createElement("iframe");return s.append(o),Object.assign(o.style,{border:"0",display:"none",overflow:"hidden"}),o.setAttribute("sandbox","allow-same-origin allow-scripts"),o.setAttribute("scrolling","no"),o.setAttribute("part","filter"),(0,n.A)(this,r)[r].append(s),i?new Promise((t=>{const n=()=>{o.removeEventListener("load",n);const i=o.contentDocument;this.dispatchEvent(new CustomEvent("load",{detail:{doc:i,index:e}}));const{width:r,height:h}=((t,e)=>{var i;if("svg"===t.documentElement.localName){var n,s;const[,,e,i]=null!==(n=null===(s=t.documentElement.getAttribute("viewBox"))||void 0===s?void 0:s.split(/\s/))&&void 0!==n?n:[];return{width:e,height:i}}const r=l(null===(i=t.querySelector('meta[name="viewport"]'))||void 0===i?void 0:i.getAttribute("content"));if(r)return Object.fromEntries(r);if("string"===typeof e)return l(e);if(e)return e;const o=t.querySelector("img");return o?{width:o.naturalWidth,height:o.naturalHeight}:(console.warn(new Error("Missing viewport properties")),{width:1e3,height:2e3})})(i,this.defaultViewport);t({element:s,iframe:o,width:parseFloat(r),height:parseFloat(h)})};o.addEventListener("load",n),o.src=i})):{blank:!0,element:s,iframe:o}}function O(){var t,e,i,s,l,r,o,h,d,p;let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.A)(this,f)[f];if(!A)return;const g=null!==(t=(0,n.A)(this,c)[c])&&void 0!==t?t:{},b=null!==(e=(0,n.A)(this,v)[v])&&void 0!==e?e:(0,n.A)(this,u)[u],w="left"===A?g:b,{width:y,height:m}=this.getBoundingClientRect(),x="both"!==this.spread&&"portrait"!==this.spread&&m>y;(0,n.A)(this,a)[a]=x;const O=null!==(i=g.width)&&void 0!==i?i:b.width,j=null!==(s=g.height)&&void 0!==s?s:b.height,k=x||(0,n.A)(this,v)[v]?Math.min(y/(null!==(l=w.width)&&void 0!==l?l:O),m/(null!==(r=w.height)&&void 0!==r?r:j)):Math.min(y/((null!==(o=g.width)&&void 0!==o?o:O)+(null!==(h=b.width)&&void 0!==h?h:O)),m/Math.max(null!==(d=g.height)&&void 0!==d?d:j,null!==(p=b.height)&&void 0!==p?p:j)),S=t=>{const{element:e,iframe:i,width:n,height:s,blank:l}=t;Object.assign(i.style,{width:"".concat(n,"px"),height:"".concat(s,"px"),transform:"scale(".concat(k,")"),transformOrigin:"top left",display:l?"none":"block"}),Object.assign(e.style,{width:"".concat((null!==n&&void 0!==n?n:O)*k,"px"),height:"".concat((null!==s&&void 0!==s?s:j)*k,"px"),overflow:"hidden",display:"block"}),x&&t!==w&&(e.style.display="none")};(0,n.A)(this,v)[v]?S((0,n.A)(this,v)[v]):(S(g),S(b))}async function j(t){let{left:e,right:i,center:s,side:l}=t;(0,n.A)(this,r)[r].replaceChildren(),(0,n.A)(this,c)[c]=null,(0,n.A)(this,u)[u]=null,(0,n.A)(this,v)[v]=null,s?((0,n.A)(this,v)[v]=await(0,n.A)(this,p)[p](s),(0,n.A)(this,f)[f]="center",(0,n.A)(this,A)[A]()):((0,n.A)(this,c)[c]=await(0,n.A)(this,p)[p](e),(0,n.A)(this,u)[u]=await(0,n.A)(this,p)[p](i),(0,n.A)(this,f)[f]=(0,n.A)(this,c)[c].blank?"right":(0,n.A)(this,u)[u].blank?"left":l,(0,n.A)(this,A)[A]())}function k(){var t,e,i,s;if(!((0,n.A)(this,v)[v]||null!==(t=(0,n.A)(this,c)[c])&&void 0!==t&&t.blank))return(0,n.A)(this,a)[a]&&"none"===(null===(e=(0,n.A)(this,c)[c])||void 0===e||null===(i=e.element)||void 0===i||null===(s=i.style)||void 0===s?void 0:s.display)?((0,n.A)(this,u)[u].element.style.display="none",(0,n.A)(this,c)[c].element.style.display="block",(0,n.A)(this,f)[f]="left",!0):void 0}function S(){var t,e,i,s;if(!((0,n.A)(this,v)[v]||null!==(t=(0,n.A)(this,u)[u])&&void 0!==t&&t.blank))return(0,n.A)(this,a)[a]&&"none"===(null===(e=(0,n.A)(this,u)[u])||void 0===e||null===(i=e.element)||void 0===i||null===(s=i.style)||void 0===s?void 0:s.display)?((0,n.A)(this,c)[c].element.style.display="none",(0,n.A)(this,u)[u].element.style.display="block",(0,n.A)(this,f)[f]="right",!0):void 0}function P(t){this.dispatchEvent(new CustomEvent("relocate",{detail:{reason:t,range:null,index:this.index,fraction:0,size:1}}))}customElements.define("foliate-fxl",m)}}]);
//# sourceMappingURL=960.0d3a6e51.chunk.js.map